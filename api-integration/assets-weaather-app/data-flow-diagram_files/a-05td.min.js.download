!function(){window.LI={"appId":"a-05td","advertiserId":32024,"sync":true,"euns":false,"identifiersToResolve":"_aalyticsuid,trc_cookie_storage,dtm_token,_pubcid,hid,muuid,globalTI_SID,ajs_user_id,_li_uuid,s_ecid,_shopify_y,gup_anonid,s_vi,IXWRAPPERLiveIntentIp,_parrable_id,tmguid,_sharedid","contextSelectors":"title,meta[name='description'],h1,link[rel='canonical']","contextElementsLength":5000,"urlCollectionMode":"full"}}();!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n=function(e){try{return!!e()}catch(e){return!0}},r=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),o=r,i=Function.prototype,s=i.call,a=o&&i.bind.bind(s,s),c=o?a:function(e){return function(){return s.apply(e,arguments)}},l=function(e){return null==e},u=l,d=TypeError,p=function(e){if(u(e))throw new d("Can't call method on "+e);return e},f=p,h=Object,g=function(e){return h(f(e))},v=g,y=c({}.hasOwnProperty),m=Object.hasOwn||function(e,t){return y(v(e),t)},w=c,b=w({}.toString),S=w("".slice),E=function(e){return S(b(e),8,-1)},C=E,x=Array.isArray||function(e){return"Array"===C(e)},k="object"==typeof document&&document.all,P=void 0===k&&void 0!==k?function(e){return"function"==typeof e||e===k}:function(e){return"function"==typeof e},R=n,O=P,I=/#|\.prototype\./,_=function(e,t){var n=A[U(e)];return n===T||n!==L&&(O(t)?R(t):!!t)},U=_.normalize=function(e){return String(e).replace(I,".").toLowerCase()},A=_.data={},L=_.NATIVE="N",T=_.POLYFILL="P",j=_,D={exports:{}},H=!0,F=function(e){return e&&e.Math===Math&&e},$=F("object"==typeof globalThis&&globalThis)||F("object"==typeof window&&window)||F("object"==typeof self&&self)||F("object"==typeof e&&e)||F("object"==typeof e&&e)||function(){return this}()||Function("return this")(),N=$,q=Object.defineProperty,M=$,B=function(e,t){try{q(N,e,{value:t,configurable:!0,writable:!0})}catch(n){N[e]=t}return t},Q="__core-js_shared__",V=D.exports=M[Q]||B(Q,{});(V.versions||(V.versions=[])).push({version:"3.38.1",mode:"pure",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"});var G=D.exports,z=m,J=x,X=j,W=G,Y=X.data,Z=X.normalize,K="USE_FUNCTION_CONSTRUCTOR",ee="AsyncIteratorPrototype",te=function(e,t){if(J(e))for(var n=0;n<e.length;n++)Y[Z(e[n])]=t};t((function(e){"object"==typeof e&&(te(e.useNative,X.NATIVE),te(e.usePolyfill,X.POLYFILL),te(e.useFeatureDetection,null),z(e,K)&&(W[K]=!!e[K]),z(e,ee)&&(W[ee]=e[ee]))}))({usePolyfill:["Date.now"]});var ne=c({}.isPrototypeOf),re=r,oe=Function.prototype,ie=oe.apply,se=oe.call,ae="object"==typeof Reflect&&Reflect.apply||(re?se.bind(ie):function(){return se.apply(ie,arguments)}),ce=E,le=c,ue=function(e){if("Function"===ce(e))return le(e)},de={},pe=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),fe=r,he=Function.prototype.call,ge=fe?he.bind(he):function(){return he.apply(he,arguments)},ve={},ye={}.propertyIsEnumerable,me=Object.getOwnPropertyDescriptor,we=me&&!ye.call({1:2},1);ve.f=we?function(e){var t=me(this,e);return!!t&&t.enumerable}:ye;var be,Se,Ee=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ce=n,xe=E,ke=Object,Pe=c("".split),Re=Ce((function(){return!ke("z").propertyIsEnumerable(0)}))?function(e){return"String"===xe(e)?Pe(e,""):ke(e)}:ke,Oe=Re,Ie=p,_e=function(e){return Oe(Ie(e))},Ue=P,Ae=function(e){return"object"==typeof e?null!==e:Ue(e)},Le={},Te=Le,je=$,De=P,He=function(e){return De(e)?e:void 0},Fe=function(e,t){return arguments.length<2?He(Te[e])||He(je[e]):Te[e]&&Te[e][t]||je[e]&&je[e][t]},$e=$.navigator,Ne=$e&&$e.userAgent,qe=Ne?String(Ne):"",Me=$,Be=qe,Qe=Me.process,Ve=Me.Deno,Ge=Qe&&Qe.versions||Ve&&Ve.version,ze=Ge&&Ge.v8;ze&&(Se=(be=ze.split("."))[0]>0&&be[0]<4?1:+(be[0]+be[1])),!Se&&Be&&(!(be=Be.match(/Edge\/(\d+)/))||be[1]>=74)&&(be=Be.match(/Chrome\/(\d+)/))&&(Se=+be[1]);var Je=Se,Xe=Je,We=n,Ye=$.String,Ze=!!Object.getOwnPropertySymbols&&!We((function(){var e=Symbol("symbol detection");return!Ye(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Xe&&Xe<41})),Ke=Ze&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,et=Fe,tt=P,nt=ne,rt=Object,ot=Ke?function(e){return"symbol"==typeof e}:function(e){var t=et("Symbol");return tt(t)&&nt(t.prototype,rt(e))},it=String,st=function(e){try{return it(e)}catch(e){return"Object"}},at=P,ct=st,lt=TypeError,ut=function(e){if(at(e))return e;throw new lt(ct(e)+" is not a function")},dt=ut,pt=l,ft=function(e,t){var n=e[t];return pt(n)?void 0:dt(n)},ht=ge,gt=P,vt=Ae,yt=TypeError,mt=G,wt=function(e,t){return mt[e]||(mt[e]=t||{})},bt=c,St=0,Et=Math.random(),Ct=bt(1..toString),xt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ct(++St+Et,36)},kt=wt,Pt=m,Rt=xt,Ot=Ze,It=Ke,_t=$.Symbol,Ut=kt("wks"),At=It?_t.for||_t:_t&&_t.withoutSetter||Rt,Lt=function(e){return Pt(Ut,e)||(Ut[e]=Ot&&Pt(_t,e)?_t[e]:At("Symbol."+e)),Ut[e]},Tt=ge,jt=Ae,Dt=ot,Ht=ft,Ft=function(e,t){var n,r;if("string"===t&&gt(n=e.toString)&&!vt(r=ht(n,e)))return r;if(gt(n=e.valueOf)&&!vt(r=ht(n,e)))return r;if("string"!==t&&gt(n=e.toString)&&!vt(r=ht(n,e)))return r;throw new yt("Can't convert object to primitive value")},$t=TypeError,Nt=Lt("toPrimitive"),qt=function(e,t){if(!jt(e)||Dt(e))return e;var n,r=Ht(e,Nt);if(r){if(void 0===t&&(t="default"),n=Tt(r,e,t),!jt(n)||Dt(n))return n;throw new $t("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ft(e,t)},Mt=ot,Bt=function(e){var t=qt(e,"string");return Mt(t)?t:t+""},Qt=Ae,Vt=$.document,Gt=Qt(Vt)&&Qt(Vt.createElement),zt=function(e){return Gt?Vt.createElement(e):{}},Jt=zt,Xt=!pe&&!n((function(){return 7!==Object.defineProperty(Jt("div"),"a",{get:function(){return 7}}).a})),Wt=pe,Yt=ge,Zt=ve,Kt=Ee,en=_e,tn=Bt,nn=m,rn=Xt,on=Object.getOwnPropertyDescriptor;de.f=Wt?on:function(e,t){if(e=en(e),t=tn(t),rn)try{return on(e,t)}catch(e){}if(nn(e,t))return Kt(!Yt(Zt.f,e,t),e[t])};var sn=ut,an=r,cn=ue(ue.bind),ln=function(e,t){return sn(e),void 0===t?e:an?cn(e,t):function(){return e.apply(t,arguments)}},un={},dn=pe&&n((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),pn=Ae,fn=String,hn=TypeError,gn=function(e){if(pn(e))return e;throw new hn(fn(e)+" is not an object")},vn=pe,yn=Xt,mn=dn,wn=gn,bn=Bt,Sn=TypeError,En=Object.defineProperty,Cn=Object.getOwnPropertyDescriptor,xn="enumerable",kn="configurable",Pn="writable";un.f=vn?mn?function(e,t,n){if(wn(e),t=bn(t),wn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Pn in n&&!n[Pn]){var r=Cn(e,t);r&&r[Pn]&&(e[t]=n.value,n={configurable:kn in n?n[kn]:r[kn],enumerable:xn in n?n[xn]:r[xn],writable:!1})}return En(e,t,n)}:En:function(e,t,n){if(wn(e),t=bn(t),wn(n),yn)try{return En(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new Sn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Rn=un,On=Ee,In=pe?function(e,t,n){return Rn.f(e,t,On(1,n))}:function(e,t,n){return e[t]=n,e},_n=$,Un=ae,An=ue,Ln=P,Tn=de.f,jn=j,Dn=Le,Hn=ln,Fn=In,$n=m,Nn=function(e){var t=function(n,r,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,o)}return Un(e,this,arguments)};return t.prototype=e.prototype,t},qn=function(e,t){var n,r,o,i,s,a,c,l,u,d=e.target,p=e.global,f=e.stat,h=e.proto,g=p?_n:f?_n[d]:_n[d]&&_n[d].prototype,v=p?Dn:Dn[d]||Fn(Dn,d,{})[d],y=v.prototype;for(i in t)r=!(n=jn(p?i:d+(f?".":"#")+i,e.forced))&&g&&$n(g,i),a=v[i],r&&(c=e.dontCallGetSet?(u=Tn(g,i))&&u.value:g[i]),s=r&&c?c:t[i],(n||h||typeof a!=typeof s)&&(l=e.bind&&r?Hn(s,_n):e.wrap&&r?Nn(s):h&&Ln(s)?An(s):s,(e.sham||s&&s.sham||a&&a.sham)&&Fn(l,"sham",!0),Fn(v,i,l),h&&($n(Dn,o=d+"Prototype")||Fn(Dn,o,{}),Fn(Dn[o],i,s),e.real&&y&&(n||!y[i])&&Fn(y,i,s)))},Mn=Math.ceil,Bn=Math.floor,Qn=Math.trunc||function(e){var t=+e;return(t>0?Bn:Mn)(t)},Vn=Qn,Gn=function(e){var t=+e;return t!=t||0===t?0:Vn(t)},zn=Gn,Jn=Math.min,Xn=function(e){var t=zn(e);return t>0?Jn(t,9007199254740991):0},Wn=function(e){return Xn(e.length)},Yn=pe,Zn=x,Kn=TypeError,er=Object.getOwnPropertyDescriptor,tr=Yn&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}()?function(e,t){if(Zn(e)&&!er(e,"length").writable)throw new Kn("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},nr=TypeError,rr=function(e){if(e>9007199254740991)throw nr("Maximum allowed index exceeded");return e},or=g,ir=Wn,sr=tr,ar=rr;qn({target:"Array",proto:!0,arity:1,forced:n((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=or(this),n=ir(t),r=arguments.length;ar(n+r);for(var o=0;o<r;o++)t[n]=arguments[o],n++;return sr(t,n),n}});var cr,lr,ur,dr=$,pr=Le,fr=function(e,t){var n=pr[e+"Prototype"],r=n&&n[t];if(r)return r;var o=dr[e],i=o&&o.prototype;return i&&i[t]},hr=fr("Array","push"),gr=ne,vr=hr,yr=Array.prototype,mr=t((function(e){var t=e.push;return e===yr||gr(yr,e)&&t===yr.push?vr:t})),wr={},br=P,Sr=$.WeakMap,Er=br(Sr)&&/native code/.test(String(Sr)),Cr=xt,xr=wt("keys"),kr=function(e){return xr[e]||(xr[e]=Cr(e))},Pr={},Rr=Er,Or=$,Ir=Ae,_r=In,Ur=m,Ar=G,Lr=kr,Tr=Pr,jr="Object already initialized",Dr=Or.TypeError,Hr=Or.WeakMap;if(Rr||Ar.state){var Fr=Ar.state||(Ar.state=new Hr);Fr.get=Fr.get,Fr.has=Fr.has,Fr.set=Fr.set,cr=function(e,t){if(Fr.has(e))throw new Dr(jr);return t.facade=e,Fr.set(e,t),t},lr=function(e){return Fr.get(e)||{}},ur=function(e){return Fr.has(e)}}else{var $r=Lr("state");Tr[$r]=!0,cr=function(e,t){if(Ur(e,$r))throw new Dr(jr);return t.facade=e,_r(e,$r,t),t},lr=function(e){return Ur(e,$r)?e[$r]:{}},ur=function(e){return Ur(e,$r)}}var Nr={set:cr,get:lr,has:ur,enforce:function(e){return ur(e)?lr(e):cr(e,{})},getterFor:function(e){return function(t){var n;if(!Ir(t)||(n=lr(t)).type!==e)throw new Dr("Incompatible receiver, "+e+" required");return n}}},qr=pe,Mr=m,Br=Function.prototype,Qr=qr&&Object.getOwnPropertyDescriptor,Vr=Mr(Br,"name"),Gr={EXISTS:Vr,PROPER:Vr&&"something"===function(){}.name,CONFIGURABLE:Vr&&(!qr||qr&&Qr(Br,"name").configurable)},zr={},Jr=Gn,Xr=Math.max,Wr=Math.min,Yr=function(e,t){var n=Jr(e);return n<0?Xr(n+t,0):Wr(n,t)},Zr=_e,Kr=Yr,eo=Wn,to=function(e){return function(t,n,r){var o=Zr(t),i=eo(o);if(0===i)return!e&&-1;var s,a=Kr(r,i);if(e&&n!=n){for(;i>a;)if((s=o[a++])!=s)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},no={includes:to(!0),indexOf:to(!1)},ro=m,oo=_e,io=no.indexOf,so=Pr,ao=c([].push),co=function(e,t){var n,r=oo(e),o=0,i=[];for(n in r)!ro(so,n)&&ro(r,n)&&ao(i,n);for(;t.length>o;)ro(r,n=t[o++])&&(~io(i,n)||ao(i,n));return i},lo=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],uo=co,po=lo,fo=Object.keys||function(e){return uo(e,po)},ho=pe,go=dn,vo=un,yo=gn,mo=_e,wo=fo;zr.f=ho&&!go?Object.defineProperties:function(e,t){yo(e);for(var n,r=mo(t),o=wo(t),i=o.length,s=0;i>s;)vo.f(e,n=o[s++],r[n]);return e};var bo,So=Fe("document","documentElement"),Eo=gn,Co=zr,xo=lo,ko=Pr,Po=So,Ro=zt,Oo="prototype",Io="script",_o=kr("IE_PROTO"),Uo=function(){},Ao=function(e){return"<"+Io+">"+e+"</"+Io+">"},Lo=function(e){e.write(Ao("")),e.close();var t=e.parentWindow.Object;return e=null,t},To=function(){try{bo=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;To="undefined"!=typeof document?document.domain&&bo?Lo(bo):(t=Ro("iframe"),n="java"+Io+":",t.style.display="none",Po.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(Ao("document.F=Object")),e.close(),e.F):Lo(bo);for(var r=xo.length;r--;)delete To[Oo][xo[r]];return To()};ko[_o]=!0;var jo,Do,Ho,Fo=Object.create||function(e,t){var n;return null!==e?(Uo[Oo]=Eo(e),n=new Uo,Uo[Oo]=null,n[_o]=e):n=To(),void 0===t?n:Co.f(n,t)},$o=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),No=m,qo=P,Mo=g,Bo=$o,Qo=kr("IE_PROTO"),Vo=Object,Go=Vo.prototype,zo=Bo?Vo.getPrototypeOf:function(e){var t=Mo(e);if(No(t,Qo))return t[Qo];var n=t.constructor;return qo(n)&&t instanceof n?n.prototype:t instanceof Vo?Go:null},Jo=In,Xo=function(e,t,n,r){return r&&r.enumerable?e[t]=n:Jo(e,t,n),e},Wo=n,Yo=P,Zo=Ae,Ko=Fo,ei=zo,ti=Xo,ni=Lt("iterator"),ri=!1;[].keys&&("next"in(Ho=[].keys())?(Do=ei(ei(Ho)))!==Object.prototype&&(jo=Do):ri=!0);var oi=!Zo(jo)||Wo((function(){var e={};return jo[ni].call(e)!==e}));Yo((jo=oi?{}:Ko(jo))[ni])||ti(jo,ni,(function(){return this}));var ii={IteratorPrototype:jo,BUGGY_SAFARI_ITERATORS:ri},si={};si[Lt("toStringTag")]="z";var ai="[object z]"===String(si),ci=ai,li=P,ui=E,di=Lt("toStringTag"),pi=Object,fi="Arguments"===ui(function(){return arguments}()),hi=ci?ui:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=pi(e),di))?n:fi?ui(t):"Object"===(r=ui(t))&&li(t.callee)?"Arguments":r},gi=hi,vi=ai?{}.toString:function(){return"[object "+gi(this)+"]"},yi=ai,mi=un.f,wi=In,bi=m,Si=vi,Ei=Lt("toStringTag"),Ci=function(e,t,n,r){var o=n?e:e&&e.prototype;o&&(bi(o,Ei)||mi(o,Ei,{configurable:!0,value:t}),r&&!yi&&wi(o,"toString",Si))},xi=ii.IteratorPrototype,ki=Fo,Pi=Ee,Ri=Ci,Oi=wr,Ii=function(){return this},_i=function(e,t,n,r){var o=t+" Iterator";return e.prototype=ki(xi,{next:Pi(+!r,n)}),Ri(e,o,!1,!0),Oi[o]=Ii,e},Ui=c,Ai=ut,Li=Ae,Ti=function(e){return Li(e)||null===e},ji=String,Di=TypeError,Hi=function(e,t,n){try{return Ui(Ai(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},Fi=Ae,$i=p,Ni=function(e){if(Ti(e))return e;throw new Di("Can't set "+ji(e)+" as a prototype")},qi=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Hi(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return $i(n),Ni(r),Fi(n)?(t?e(n,r):n.__proto__=r,n):n}}():void 0),Mi=qn,Bi=ge,Qi=Gr,Vi=_i,Gi=zo,zi=Ci,Ji=Xo,Xi=wr,Wi=ii,Yi=Qi.PROPER,Zi=Wi.BUGGY_SAFARI_ITERATORS,Ki=Lt("iterator"),es="keys",ts="values",ns="entries",rs=function(){return this},os=function(e,t,n,r,o,i,s){Vi(n,t,r);var a,c,l,u=function(e){if(e===o&&g)return g;if(!Zi&&e&&e in f)return f[e];switch(e){case es:case ts:case ns:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,f=e.prototype,h=f[Ki]||f["@@iterator"]||o&&f[o],g=!Zi&&h||u(o),v="Array"===t&&f.entries||h;if(v&&(a=Gi(v.call(new e)))!==Object.prototype&&a.next&&(zi(a,d,!0,!0),Xi[d]=rs),Yi&&o===ts&&h&&h.name!==ts&&(p=!0,g=function(){return Bi(h,this)}),o)if(c={values:u(ts),keys:i?g:u(es),entries:u(ns)},s)for(l in c)(Zi||p||!(l in f))&&Ji(f,l,c[l]);else Mi({target:t,proto:!0,forced:Zi||p},c);return s&&f[Ki]!==g&&Ji(f,Ki,g,{name:o}),Xi[t]=g,c},is=function(e,t){return{value:e,done:t}},ss=_e,as=wr,cs=Nr;un.f;var ls=os,us=is,ds="Array Iterator",ps=cs.set,fs=cs.getterFor(ds);ls(Array,"Array",(function(e,t){ps(this,{type:ds,target:ss(e),index:0,kind:t})}),(function(){var e=fs(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,us(void 0,!0);switch(e.kind){case"keys":return us(n,!1);case"values":return us(t[n],!1)}return us([n,t[n]],!1)}),"values"),as.Arguments=as.Array;var hs=qn,gs=c,vs=Yr,ys=RangeError,ms=String.fromCharCode,ws=String.fromCodePoint,bs=gs([].join);hs({target:"String",stat:!0,arity:1,forced:!!ws&&1!==ws.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,o=0;r>o;){if(t=+arguments[o++],vs(t,1114111)!==t)throw new ys(t+" is not a valid code point");n[o]=t<65536?ms(t):ms(55296+((t-=65536)>>10),t%1024+56320)}return bs(n,"")}});var Ss=$,Es=pe,Cs=Object.getOwnPropertyDescriptor,xs=function(e){if(!Es)return Ss[e];var t=Cs(Ss,e);return t&&t.value},ks=n,Ps=H,Rs=Lt("iterator"),Os=!ks((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),n.delete("b",void 0),!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b")||!t.size&&Ps||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Rs]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==r||"x"!==new URL("https://x",void 0).host})),Is=un,_s=function(e,t,n){return Is.f(e,t,n)},Us=Xo,As=ne,Ls=TypeError,Ts=function(e,t){if(As(t,e))return e;throw new Ls("Incorrect invocation")},js=hi,Ds=String,Hs=function(e){if("Symbol"===js(e))throw new TypeError("Cannot convert a Symbol value to a string");return Ds(e)},Fs=hi,$s=ft,Ns=l,qs=wr,Ms=Lt("iterator"),Bs=function(e){if(!Ns(e))return $s(e,Ms)||$s(e,"@@iterator")||qs[Fs(e)]},Qs=ge,Vs=ut,Gs=gn,zs=st,Js=Bs,Xs=TypeError,Ws=function(e,t){var n=arguments.length<2?Js(e):t;if(Vs(n))return Gs(Qs(n,e));throw new Xs(zs(e)+" is not iterable")},Ys=TypeError,Zs=function(e,t){if(e<t)throw new Ys("Not enough arguments");return e},Ks=c([].slice),ea=Ks,ta=Math.floor,na=function(e,t){var n=e.length;if(n<8)for(var r,o,i=1;i<n;){for(o=i,r=e[i];o&&t(e[o-1],r)>0;)e[o]=e[--o];o!==i++&&(e[o]=r)}else for(var s=ta(n/2),a=na(ea(e,0,s),t),c=na(ea(e,s),t),l=a.length,u=c.length,d=0,p=0;d<l||p<u;)e[d+p]=d<l&&p<u?t(a[d],c[p])<=0?a[d++]:c[p++]:d<l?a[d++]:c[p++];return e},ra=qn,oa=$,ia=xs,sa=Fe,aa=ge,ca=c,la=pe,ua=Os,da=Xo,pa=_s,fa=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Us(e,r,t[r],n);return e},ha=Ci,ga=_i,va=Nr,ya=Ts,ma=P,wa=m,ba=ln,Sa=hi,Ea=gn,Ca=Ae,xa=Hs,ka=Fo,Pa=Ee,Ra=Ws,Oa=Bs,Ia=is,_a=Zs,Ua=na,Aa=Lt("iterator"),La="URLSearchParams",Ta=La+"Iterator",ja=va.set,Da=va.getterFor(La),Ha=va.getterFor(Ta),Fa=ia("fetch"),$a=ia("Request"),Na=ia("Headers"),qa=$a&&$a.prototype,Ma=Na&&Na.prototype,Ba=oa.TypeError,Qa=oa.encodeURIComponent,Va=String.fromCharCode,Ga=sa("String","fromCodePoint"),za=parseInt,Ja=ca("".charAt),Xa=ca([].join),Wa=ca([].push),Ya=ca("".replace),Za=ca([].shift),Ka=ca([].splice),ec=ca("".split),tc=ca("".slice),nc=ca(/./.exec),rc=/\+/g,oc=/^[0-9a-f]+$/i,ic=function(e,t){var n=tc(e,t,t+2);return nc(oc,n)?za(n,16):NaN},sc=function(e){for(var t=0,n=128;n>0&&e&n;n>>=1)t++;return t},ac=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},cc=function(e){for(var t=(e=Ya(e,rc," ")).length,n="",r=0;r<t;){var o=Ja(e,r);if("%"===o){if("%"===Ja(e,r+1)||r+3>t){n+="%",r++;continue}var i=ic(e,r+1);if(i!=i){n+=o,r++;continue}r+=2;var s=sc(i);if(0===s)o=Va(i);else{if(1===s||s>4){n+="�",r++;continue}for(var a=[i],c=1;c<s&&!(++r+3>t||"%"!==Ja(e,r));){var l=ic(e,r+1);if(l!=l){r+=3;break}if(l>191||l<128)break;Wa(a,l),r+=2,c++}if(a.length!==s){n+="�";continue}var u=ac(a);null===u?n+="�":o=Ga(u)}}n+=o,r++}return n},lc=/[!'()~]|%20/g,uc={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},dc=function(e){return uc[e]},pc=function(e){return Ya(Qa(e),lc,dc)},fc=ga((function(e,t){ja(this,{type:Ta,target:Da(e).entries,index:0,kind:t})}),La,(function(){var e=Ha(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,Ia(void 0,!0);var r=t[n];switch(e.kind){case"keys":return Ia(r.key,!1);case"values":return Ia(r.value,!1)}return Ia([r.key,r.value],!1)}),!0),hc=function(e){this.entries=[],this.url=null,void 0!==e&&(Ca(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Ja(e,0)?tc(e,1):e:xa(e)))};hc.prototype={type:La,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,o,i,s,a,c=this.entries,l=Oa(e);if(l)for(n=(t=Ra(e,l)).next;!(r=aa(n,t)).done;){if(i=(o=Ra(Ea(r.value))).next,(s=aa(i,o)).done||(a=aa(i,o)).done||!aa(i,o).done)throw new Ba("Expected sequence with length 2");Wa(c,{key:xa(s.value),value:xa(a.value)})}else for(var u in e)wa(e,u)&&Wa(c,{key:u,value:xa(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=this.entries,o=ec(e,"&"),i=0;i<o.length;)(t=o[i++]).length&&(n=ec(t,"="),Wa(r,{key:cc(Za(n)),value:cc(Xa(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],Wa(n,pc(e.key)+"="+pc(e.value));return Xa(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var gc=function(){ya(this,vc);var e=ja(this,new hc(arguments.length>0?arguments[0]:void 0));la||(this.size=e.entries.length)},vc=gc.prototype;if(fa(vc,{append:function(e,t){var n=Da(this);_a(arguments.length,2),Wa(n.entries,{key:xa(e),value:xa(t)}),la||this.length++,n.updateURL()},delete:function(e){for(var t=Da(this),n=_a(arguments.length,1),r=t.entries,o=xa(e),i=n<2?void 0:arguments[1],s=void 0===i?i:xa(i),a=0;a<r.length;){var c=r[a];if(c.key!==o||void 0!==s&&c.value!==s)a++;else if(Ka(r,a,1),void 0!==s)break}la||(this.size=r.length),t.updateURL()},get:function(e){var t=Da(this).entries;_a(arguments.length,1);for(var n=xa(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=Da(this).entries;_a(arguments.length,1);for(var n=xa(e),r=[],o=0;o<t.length;o++)t[o].key===n&&Wa(r,t[o].value);return r},has:function(e){for(var t=Da(this).entries,n=_a(arguments.length,1),r=xa(e),o=n<2?void 0:arguments[1],i=void 0===o?o:xa(o),s=0;s<t.length;){var a=t[s++];if(a.key===r&&(void 0===i||a.value===i))return!0}return!1},set:function(e,t){var n=Da(this);_a(arguments.length,1);for(var r,o=n.entries,i=!1,s=xa(e),a=xa(t),c=0;c<o.length;c++)(r=o[c]).key===s&&(i?Ka(o,c--,1):(i=!0,r.value=a));i||Wa(o,{key:s,value:a}),la||(this.size=o.length),n.updateURL()},sort:function(){var e=Da(this);Ua(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=Da(this).entries,r=ba(e,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new fc(this,"keys")},values:function(){return new fc(this,"values")},entries:function(){return new fc(this,"entries")}},{enumerable:!0}),da(vc,Aa,vc.entries,{name:"entries"}),da(vc,"toString",(function(){return Da(this).serialize()}),{enumerable:!0}),la&&pa(vc,"size",{get:function(){return Da(this).entries.length},configurable:!0,enumerable:!0}),ha(gc,La),ra({global:!0,constructor:!0,forced:!ua},{URLSearchParams:gc}),!ua&&ma(Na)){var yc=ca(Ma.has),mc=ca(Ma.set),wc=function(e){if(Ca(e)){var t,n=e.body;if(Sa(n)===La)return t=e.headers?new Na(e.headers):new Na,yc(t,"content-type")||mc(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),ka(e,{body:Pa(0,xa(n)),headers:Pa(0,t)})}return e};if(ma(Fa)&&ra({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return Fa(e,arguments.length>1?wc(arguments[1]):{})}}),ma($a)){var bc=function(e){return ya(this,qa),new $a(e,arguments.length>1?wc(arguments[1]):{})};qa.constructor=bc,bc.prototype=qa,ra({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:bc})}}var Sc={URLSearchParams:gc,getState:Da},Ec=c,Cc=Gn,xc=Hs,kc=p,Pc=Ec("".charAt),Rc=Ec("".charCodeAt),Oc=Ec("".slice),Ic=function(e){return function(t,n){var r,o,i=xc(kc(t)),s=Cc(n),a=i.length;return s<0||s>=a?e?"":void 0:(r=Rc(i,s))<55296||r>56319||s+1===a||(o=Rc(i,s+1))<56320||o>57343?e?Pc(i,s):r:e?Oc(i,s,s+2):o-56320+(r-55296<<10)+65536}},_c={codeAt:Ic(!1),charAt:Ic(!0)},Uc=_c.charAt,Ac=Hs,Lc=Nr,Tc=os,jc=is,Dc="String Iterator",Hc=Lc.set,Fc=Lc.getterFor(Dc);Tc(String,"String",(function(e){Hc(this,{type:Dc,string:Ac(e),index:0})}),(function(){var e,t=Fc(this),n=t.string,r=t.index;return r>=n.length?jc(void 0,!0):(e=Uc(n,r),t.index+=e.length,jc(e,!1))}));var $c={};$c.f=Object.getOwnPropertySymbols;var Nc=pe,qc=c,Mc=ge,Bc=n,Qc=fo,Vc=$c,Gc=ve,zc=g,Jc=Re,Xc=Object.assign,Wc=Object.defineProperty,Yc=qc([].concat),Zc=!Xc||Bc((function(){if(Nc&&1!==Xc({b:1},Xc(Wc({},"a",{enumerable:!0,get:function(){Wc(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!==Xc({},e)[n]||Qc(Xc({},t)).join("")!==r}))?function(e,t){for(var n=zc(e),r=arguments.length,o=1,i=Vc.f,s=Gc.f;r>o;)for(var a,c=Jc(arguments[o++]),l=i?Yc(Qc(c),i(c)):Qc(c),u=l.length,d=0;u>d;)a=l[d++],Nc&&!Mc(s,c,a)||(n[a]=c[a]);return n}:Xc,Kc=ge,el=gn,tl=ft,nl=function(e,t,n){var r,o;el(e);try{if(!(r=tl(e,"return"))){if("throw"===t)throw n;return n}r=Kc(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return el(r),n},rl=gn,ol=nl,il=wr,sl=Lt("iterator"),al=Array.prototype,cl=function(e){return void 0!==e&&(il.Array===e||al[sl]===e)},ll=P,ul=G,dl=c(Function.toString);ll(ul.inspectSource)||(ul.inspectSource=function(e){return dl(e)});var pl=ul.inspectSource,fl=c,hl=n,gl=P,vl=hi,yl=pl,ml=function(){},wl=Fe("Reflect","construct"),bl=/^\s*(?:class|function)\b/,Sl=fl(bl.exec),El=!bl.test(ml),Cl=function(e){if(!gl(e))return!1;try{return wl(ml,[],e),!0}catch(e){return!1}},xl=function(e){if(!gl(e))return!1;switch(vl(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return El||!!Sl(bl,yl(e))}catch(e){return!0}};xl.sham=!0;var kl,Pl=!wl||hl((function(){var e;return Cl(Cl.call)||!Cl(Object)||!Cl((function(){e=!0}))||e}))?xl:Cl,Rl=pe,Ol=un,Il=Ee,_l=function(e,t,n){Rl?Ol.f(e,t,Il(0,n)):e[t]=n},Ul=ln,Al=ge,Ll=g,Tl=function(e,t,n,r){try{return r?t(rl(n)[0],n[1]):t(n)}catch(t){ol(e,"throw",t)}},jl=cl,Dl=Pl,Hl=Wn,Fl=_l,$l=Ws,Nl=Bs,ql=Array,Ml=c,Bl=2147483647,Ql=/[^\0-\u007E]/,Vl=/[.\u3002\uFF0E\uFF61]/g,Gl="Overflow: input needs wider integers to process",zl=RangeError,Jl=Ml(Vl.exec),Xl=Math.floor,Wl=String.fromCharCode,Yl=Ml("".charCodeAt),Zl=Ml([].join),Kl=Ml([].push),eu=Ml("".replace),tu=Ml("".split),nu=Ml("".toLowerCase),ru=function(e){return e+22+75*(e<26)},ou=function(e,t,n){var r=0;for(e=n?Xl(e/700):e>>1,e+=Xl(e/t);e>455;)e=Xl(e/35),r+=36;return Xl(r+36*e/(e+38))},iu=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=Yl(e,n++);if(o>=55296&&o<=56319&&n<r){var i=Yl(e,n++);56320==(64512&i)?Kl(t,((1023&o)<<10)+(1023&i)+65536):(Kl(t,o),n--)}else Kl(t,o)}return t}(e);var n,r,o=e.length,i=128,s=0,a=72;for(n=0;n<e.length;n++)(r=e[n])<128&&Kl(t,Wl(r));var c=t.length,l=c;for(c&&Kl(t,"-");l<o;){var u=Bl;for(n=0;n<e.length;n++)(r=e[n])>=i&&r<u&&(u=r);var d=l+1;if(u-i>Xl((Bl-s)/d))throw new zl(Gl);for(s+=(u-i)*d,i=u,n=0;n<e.length;n++){if((r=e[n])<i&&++s>Bl)throw new zl(Gl);if(r===i){for(var p=s,f=36;;){var h=f<=a?1:f>=a+26?26:f-a;if(p<h)break;var g=p-h,v=36-h;Kl(t,Wl(ru(h+g%v))),p=Xl(g/v),f+=36}Kl(t,Wl(ru(p))),a=ou(s,d,l===c),s=0,l++}}s++,i++}return Zl(t,"")},su=qn,au=pe,cu=Os,lu=$,uu=ln,du=c,pu=Xo,fu=_s,hu=Ts,gu=m,vu=Zc,yu=function(e){var t=Ll(e),n=Dl(this),r=arguments.length,o=r>1?arguments[1]:void 0,i=void 0!==o;i&&(o=Ul(o,r>2?arguments[2]:void 0));var s,a,c,l,u,d,p=Nl(t),f=0;if(!p||this===ql&&jl(p))for(s=Hl(t),a=n?new this(s):ql(s);s>f;f++)d=i?o(t[f],f):t[f],Fl(a,f,d);else for(a=n?new this:[],u=(l=$l(t,p)).next;!(c=Al(u,l)).done;f++)d=i?Tl(l,o,[c.value,f],!0):c.value,Fl(a,f,d);return a.length=f,a},mu=Ks,wu=_c.codeAt,bu=function(e){var t,n,r=[],o=tu(eu(nu(e),Vl,"."),".");for(t=0;t<o.length;t++)n=o[t],Kl(r,Jl(Ql,n)?"xn--"+iu(n):n);return Zl(r,".")},Su=Hs,Eu=Ci,Cu=Zs,xu=Sc,ku=Nr,Pu=ku.set,Ru=ku.getterFor("URL"),Ou=xu.URLSearchParams,Iu=xu.getState,_u=lu.URL,Uu=lu.TypeError,Au=lu.parseInt,Lu=Math.floor,Tu=Math.pow,ju=du("".charAt),Du=du(/./.exec),Hu=du([].join),Fu=du(1..toString),$u=du([].pop),Nu=du([].push),qu=du("".replace),Mu=du([].shift),Bu=du("".split),Qu=du("".slice),Vu=du("".toLowerCase),Gu=du([].unshift),zu="Invalid scheme",Ju="Invalid host",Xu="Invalid port",Wu=/[a-z]/i,Yu=/[\d+-.a-z]/i,Zu=/\d/,Ku=/^0x/i,ed=/^[0-7]+$/,td=/^\d+$/,nd=/^[\da-f]+$/i,rd=/[\0\t\n\r #%/:<>?@[\\\]^|]/,od=/[\0\t\n\r #/:<>?@[\\\]^|]/,id=/^[\u0000-\u0020]+/,sd=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ad=/[\t\n\r]/g,cd=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)Gu(t,e%256),e=Lu(e/256);return Hu(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n?r:t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=Fu(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ld={},ud=vu({},ld,{" ":1,'"':1,"<":1,">":1,"`":1}),dd=vu({},ud,{"#":1,"?":1,"{":1,"}":1}),pd=vu({},dd,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),fd=function(e,t){var n=wu(e,0);return n>32&&n<127&&!gu(t,e)?e:encodeURIComponent(e)},hd={ftp:21,file:null,http:80,https:443,ws:80,wss:443},gd=function(e,t){var n;return 2===e.length&&Du(Wu,ju(e,0))&&(":"===(n=ju(e,1))||!t&&"|"===n)},vd=function(e){var t;return e.length>1&&gd(Qu(e,0,2))&&(2===e.length||"/"===(t=ju(e,2))||"\\"===t||"?"===t||"#"===t)},yd=function(e){return"."===e||"%2e"===Vu(e)},md={},wd={},bd={},Sd={},Ed={},Cd={},xd={},kd={},Pd={},Rd={},Od={},Id={},_d={},Ud={},Ad={},Ld={},Td={},jd={},Dd={},Hd={},Fd={},$d=function(e,t,n){var r,o,i,s=Su(e);if(t){if(o=this.parse(s))throw new Uu(o);this.searchParams=null}else{if(void 0!==n&&(r=new $d(n,!0)),o=this.parse(s,null,r))throw new Uu(o);(i=Iu(new Ou)).bindURL(this),this.searchParams=i}};$d.prototype={type:"URL",parse:function(e,t,n){var r,o,i,s,a,c=this,l=t||md,u=0,d="",p=!1,f=!1,h=!1;for(e=Su(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=qu(e,id,""),e=qu(e,sd,"$1")),e=qu(e,ad,""),r=yu(e);u<=r.length;){switch(o=r[u],l){case md:if(!o||!Du(Wu,o)){if(t)return zu;l=bd;continue}d+=Vu(o),l=wd;break;case wd:if(o&&(Du(Yu,o)||"+"===o||"-"===o||"."===o))d+=Vu(o);else{if(":"!==o){if(t)return zu;d="",l=bd,u=0;continue}if(t&&(c.isSpecial()!==gu(hd,d)||"file"===d&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&hd[c.scheme]===c.port&&(c.port=null));d="","file"===c.scheme?l=Ud:c.isSpecial()&&n&&n.scheme===c.scheme?l=Sd:c.isSpecial()?l=kd:"/"===r[u+1]?(l=Ed,u++):(c.cannotBeABaseURL=!0,Nu(c.path,""),l=Dd)}break;case bd:if(!n||n.cannotBeABaseURL&&"#"!==o)return zu;if(n.cannotBeABaseURL&&"#"===o){c.scheme=n.scheme,c.path=mu(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=Fd;break}l="file"===n.scheme?Ud:Cd;continue;case Sd:if("/"!==o||"/"!==r[u+1]){l=Cd;continue}l=Pd,u++;break;case Ed:if("/"===o){l=Rd;break}l=jd;continue;case Cd:if(c.scheme=n.scheme,o===kl)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=mu(n.path),c.query=n.query;else if("/"===o||"\\"===o&&c.isSpecial())l=xd;else if("?"===o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=mu(n.path),c.query="",l=Hd;else{if("#"!==o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=mu(n.path),c.path.length--,l=jd;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=mu(n.path),c.query=n.query,c.fragment="",l=Fd}break;case xd:if(!c.isSpecial()||"/"!==o&&"\\"!==o){if("/"!==o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=jd;continue}l=Rd}else l=Pd;break;case kd:if(l=Pd,"/"!==o||"/"!==ju(d,u+1))continue;u++;break;case Pd:if("/"!==o&&"\\"!==o){l=Rd;continue}break;case Rd:if("@"===o){p&&(d="%40"+d),p=!0,i=yu(d);for(var g=0;g<i.length;g++){var v=i[g];if(":"!==v||h){var y=fd(v,pd);h?c.password+=y:c.username+=y}else h=!0}d=""}else if(o===kl||"/"===o||"?"===o||"#"===o||"\\"===o&&c.isSpecial()){if(p&&""===d)return"Invalid authority";u-=yu(d).length+1,d="",l=Od}else d+=o;break;case Od:case Id:if(t&&"file"===c.scheme){l=Ld;continue}if(":"!==o||f){if(o===kl||"/"===o||"?"===o||"#"===o||"\\"===o&&c.isSpecial()){if(c.isSpecial()&&""===d)return Ju;if(t&&""===d&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(d))return s;if(d="",l=Td,t)return;continue}"["===o?f=!0:"]"===o&&(f=!1),d+=o}else{if(""===d)return Ju;if(s=c.parseHost(d))return s;if(d="",l=_d,t===Id)return}break;case _d:if(!Du(Zu,o)){if(o===kl||"/"===o||"?"===o||"#"===o||"\\"===o&&c.isSpecial()||t){if(""!==d){var m=Au(d,10);if(m>65535)return Xu;c.port=c.isSpecial()&&m===hd[c.scheme]?null:m,d=""}if(t)return;l=Td;continue}return Xu}d+=o;break;case Ud:if(c.scheme="file","/"===o||"\\"===o)l=Ad;else{if(!n||"file"!==n.scheme){l=jd;continue}switch(o){case kl:c.host=n.host,c.path=mu(n.path),c.query=n.query;break;case"?":c.host=n.host,c.path=mu(n.path),c.query="",l=Hd;break;case"#":c.host=n.host,c.path=mu(n.path),c.query=n.query,c.fragment="",l=Fd;break;default:vd(Hu(mu(r,u),""))||(c.host=n.host,c.path=mu(n.path),c.shortenPath()),l=jd;continue}}break;case Ad:if("/"===o||"\\"===o){l=Ld;break}n&&"file"===n.scheme&&!vd(Hu(mu(r,u),""))&&(gd(n.path[0],!0)?Nu(c.path,n.path[0]):c.host=n.host),l=jd;continue;case Ld:if(o===kl||"/"===o||"\\"===o||"?"===o||"#"===o){if(!t&&gd(d))l=jd;else if(""===d){if(c.host="",t)return;l=Td}else{if(s=c.parseHost(d))return s;if("localhost"===c.host&&(c.host=""),t)return;d="",l=Td}continue}d+=o;break;case Td:if(c.isSpecial()){if(l=jd,"/"!==o&&"\\"!==o)continue}else if(t||"?"!==o)if(t||"#"!==o){if(o!==kl&&(l=jd,"/"!==o))continue}else c.fragment="",l=Fd;else c.query="",l=Hd;break;case jd:if(o===kl||"/"===o||"\\"===o&&c.isSpecial()||!t&&("?"===o||"#"===o)){if(".."===(a=Vu(a=d))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(c.shortenPath(),"/"===o||"\\"===o&&c.isSpecial()||Nu(c.path,"")):yd(d)?"/"===o||"\\"===o&&c.isSpecial()||Nu(c.path,""):("file"===c.scheme&&!c.path.length&&gd(d)&&(c.host&&(c.host=""),d=ju(d,0)+":"),Nu(c.path,d)),d="","file"===c.scheme&&(o===kl||"?"===o||"#"===o))for(;c.path.length>1&&""===c.path[0];)Mu(c.path);"?"===o?(c.query="",l=Hd):"#"===o&&(c.fragment="",l=Fd)}else d+=fd(o,dd);break;case Dd:"?"===o?(c.query="",l=Hd):"#"===o?(c.fragment="",l=Fd):o!==kl&&(c.path[0]+=fd(o,ld));break;case Hd:t||"#"!==o?o!==kl&&("'"===o&&c.isSpecial()?c.query+="%27":c.query+="#"===o?"%23":fd(o,ld)):(c.fragment="",l=Fd);break;case Fd:o!==kl&&(c.fragment+=fd(o,ud))}u++}},parseHost:function(e){var t,n,r;if("["===ju(e,0)){if("]"!==ju(e,e.length-1))return Ju;if(t=function(e){var t,n,r,o,i,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,p=function(){return ju(e,d)};if(":"===p()){if(":"!==ju(e,1))return;d+=2,u=++l}for(;p();){if(8===l)return;if(":"!==p()){for(t=n=0;n<4&&Du(nd,p());)t=16*t+Au(p(),16),d++,n++;if("."===p()){if(0===n)return;if(d-=n,l>6)return;for(r=0;p();){if(o=null,r>0){if(!("."===p()&&r<4))return;d++}if(!Du(Zu,p()))return;for(;Du(Zu,p());){if(i=Au(p(),10),null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;d++}c[l]=256*c[l]+o,2!=++r&&4!==r||l++}if(4!==r)return;break}if(":"===p()){if(d++,!p())return}else if(p())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(s=l-u,l=7;0!==l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!==l)return;return c}(Qu(e,1,-1)),!t)return Ju;this.host=t}else if(this.isSpecial()){if(e=bu(e),Du(rd,e))return Ju;if(t=function(e){var t,n,r,o,i,s,a,c=Bu(e,".");if(c.length&&""===c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""===(o=c[r]))return e;if(i=10,o.length>1&&"0"===ju(o,0)&&(i=Du(Ku,o)?16:8,o=Qu(o,8===i?1:2)),""===o)s=0;else{if(!Du(10===i?td:8===i?ed:nd,o))return e;s=Au(o,i)}Nu(n,s)}for(r=0;r<t;r++)if(s=n[r],r===t-1){if(s>=Tu(256,5-t))return null}else if(s>255)return null;for(a=$u(n),r=0;r<n.length;r++)a+=n[r]*Tu(256,3-r);return a}(e),null===t)return Ju;this.host=t}else{if(Du(od,e))return Ju;for(t="",n=yu(e),r=0;r<n.length;r++)t+=fd(n[r],ld);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return gu(hd,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&gd(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==o?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=cd(o),null!==i&&(l+=":"+i)):"file"===t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+Hu(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw new Uu(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new Nd(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+cd(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Su(e)+":",md)},getUsername:function(){return this.username},setUsername:function(e){var t=yu(Su(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=fd(t[n],pd)}},getPassword:function(){return this.password},setPassword:function(e){var t=yu(Su(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=fd(t[n],pd)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?cd(e):cd(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Od)},getHostname:function(){var e=this.host;return null===e?"":cd(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Id)},getPort:function(){var e=this.port;return null===e?"":Su(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=Su(e))?this.port=null:this.parse(e,_d))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Hu(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Td))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=Su(e))?this.query=null:("?"===ju(e,0)&&(e=Qu(e,1)),this.query="",this.parse(e,Hd)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=Su(e))?("#"===ju(e,0)&&(e=Qu(e,1)),this.fragment="",this.parse(e,Fd)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Nd=function(e){var t=hu(this,qd),n=Cu(arguments.length,1)>1?arguments[1]:void 0,r=Pu(t,new $d(e,!1,n));au||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},qd=Nd.prototype,Md=function(e,t){return{get:function(){return Ru(this)[e]()},set:t&&function(e){return Ru(this)[t](e)},configurable:!0,enumerable:!0}};if(au&&(fu(qd,"href",Md("serialize","setHref")),fu(qd,"origin",Md("getOrigin")),fu(qd,"protocol",Md("getProtocol","setProtocol")),fu(qd,"username",Md("getUsername","setUsername")),fu(qd,"password",Md("getPassword","setPassword")),fu(qd,"host",Md("getHost","setHost")),fu(qd,"hostname",Md("getHostname","setHostname")),fu(qd,"port",Md("getPort","setPort")),fu(qd,"pathname",Md("getPathname","setPathname")),fu(qd,"search",Md("getSearch","setSearch")),fu(qd,"searchParams",Md("getSearchParams")),fu(qd,"hash",Md("getHash","setHash"))),pu(qd,"toJSON",(function(){return Ru(this).serialize()}),{enumerable:!0}),pu(qd,"toString",(function(){return Ru(this).serialize()}),{enumerable:!0}),_u){var Bd=_u.createObjectURL,Qd=_u.revokeObjectURL;Bd&&pu(Nd,"createObjectURL",uu(Bd,_u)),Qd&&pu(Nd,"revokeObjectURL",uu(Qd,_u))}Eu(Nd,"URL"),su({global:!0,constructor:!0,forced:!cu,sham:!au},{URL:Nd});var Vd=qn,Gd=n,zd=Zs,Jd=Hs,Xd=Os,Wd=Fe("URL"),Yd=Xd&&Gd((function(){Wd.canParse()})),Zd=Gd((function(){return 1!==Wd.canParse.length}));Vd({target:"URL",stat:!0,forced:!Yd||Zd},{canParse:function(e){var t=zd(arguments.length,1),n=Jd(e),r=t<2||void 0===arguments[1]?void 0:Jd(arguments[1]);try{return!!new Wd(n,r)}catch(e){return!1}}});var Kd=qn,ep=Zs,tp=Hs,np=Os,rp=Fe("URL");Kd({target:"URL",stat:!0,forced:!np},{parse:function(e){var t=ep(arguments.length,1),n=tp(e),r=t<2||void 0===arguments[1]?void 0:tp(arguments[1]);try{return new rp(n,r)}catch(e){return null}}});var op=t(Le.URL);qn({target:"Object",stat:!0},{hasOwn:m});var ip=t(Le.Object.hasOwn),sp=st,ap=TypeError,cp=g,lp=Wn,up=tr,dp=function(e,t){if(!delete e[t])throw new ap("Cannot delete property "+sp(t)+" of "+sp(e))},pp=rr;qn({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=cp(this),n=lp(t),r=arguments.length;if(r){pp(n+r);for(var o=n;o--;){var i=o+r;o in t?t[i]=t[o]:dp(t,i)}for(var s=0;s<r;s++)t[s]=arguments[s]}return up(t,n+r)}});var fp=fr("Array","unshift"),hp=ne,gp=fp,vp=Array.prototype,yp=t((function(e){var t=e.unshift;return e===vp||hp(vp,e)&&t===vp.unshift?gp:t})),mp=no.includes;qn({target:"Array",proto:!0,forced:n((function(){return!Array(1).includes()}))},{includes:function(e){return mp(this,e,arguments.length>1?arguments[1]:void 0)}});var wp=fr("Array","includes"),bp=Ae,Sp=E,Ep=Lt("match"),Cp=function(e){var t;return bp(e)&&(void 0!==(t=e[Ep])?!!t:"RegExp"===Sp(e))},xp=TypeError,kp=Lt("match"),Pp=qn,Rp=function(e){if(Cp(e))throw new xp("The method doesn't accept regular expressions");return e},Op=p,Ip=Hs,_p=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[kp]=!1,"/./"[e](t)}catch(e){}}return!1},Up=c("".indexOf);Pp({target:"String",proto:!0,forced:!_p("includes")},{includes:function(e){return!!~Up(Ip(Op(this)),Ip(Rp(e)),arguments.length>1?arguments[1]:void 0)}});var Ap=fr("String","includes"),Lp=ne,Tp=wp,jp=Ap,Dp=Array.prototype,Hp=String.prototype,Fp=t((function(e){var t=e.includes;return e===Dp||Lp(Dp,e)&&t===Dp.includes?Tp:"string"==typeof e||e===Hp||Lp(Hp,e)&&t===Hp.includes?jp:t})),$p=qn,Np=Date,qp=c(Np.prototype.getTime);$p({target:"Date",stat:!0},{now:function(){return qp(new Np)}});var Mp=t(Le.Date.now),Bp=pe,Qp=n,Vp=c,Gp=zo,zp=fo,Jp=_e,Xp=Vp(ve.f),Wp=Vp([].push),Yp=Bp&&Qp((function(){var e=Object.create(null);return e[2]=2,!Xp(e,2)})),Zp=function(e){return function(t){for(var n,r=Jp(t),o=zp(r),i=Yp&&null===Gp(r),s=o.length,a=0,c=[];s>a;)n=o[a++],Bp&&!(i?n in r:Xp(r,n))||Wp(c,e?[n,r[n]]:r[n]);return c}},Kp={entries:Zp(!0),values:Zp(!1)}.entries;qn({target:"Object",stat:!0},{entries:function(e){return Kp(e)}});var ef=t(Le.Object.entries),tf={},nf=co,rf=lo.concat("length","prototype");tf.f=Object.getOwnPropertyNames||function(e){return nf(e,rf)};var of=Fe,sf=tf,af=$c,cf=gn,lf=c([].concat),uf=of("Reflect","ownKeys")||function(e){var t=sf.f(cf(e)),n=af.f;return n?lf(t,n(e)):t},df=m,pf=uf,ff=de,hf=un,gf=Ae,vf=In,yf=Error,mf=c("".replace),wf=String(new yf("zxcasd").stack),bf=/\n\s*at [^:]*:[^\n]*/,Sf=bf.test(wf),Ef=Ee,Cf=!n((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",Ef(1,7)),7!==e.stack)})),xf=In,kf=function(e,t){if(Sf&&"string"==typeof e&&!yf.prepareStackTrace)for(;t--;)e=mf(e,bf,"");return e},Pf=Cf,Rf=Error.captureStackTrace,Of=ln,If=ge,_f=gn,Uf=st,Af=cl,Lf=Wn,Tf=ne,jf=Ws,Df=Bs,Hf=nl,Ff=TypeError,$f=function(e,t){this.stopped=e,this.result=t},Nf=$f.prototype,qf=function(e,t,n){var r,o,i,s,a,c,l,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),g=Of(t,u),v=function(e){return r&&Hf(r,"normal",e),new $f(!0,e)},y=function(e){return d?(_f(e),h?g(e[0],e[1],v):g(e[0],e[1])):h?g(e,v):g(e)};if(p)r=e.iterator;else if(f)r=e;else{if(!(o=Df(e)))throw new Ff(Uf(e)+" is not iterable");if(Af(o)){for(i=0,s=Lf(e);s>i;i++)if((a=y(e[i]))&&Tf(Nf,a))return a;return new $f(!1)}r=jf(e,o)}for(c=p?e.next:r.next;!(l=If(c,r)).done;){try{a=y(l.value)}catch(e){Hf(r,"throw",e)}if("object"==typeof a&&a&&Tf(Nf,a))return a}return new $f(!1)},Mf=Hs,Bf=qn,Qf=ne,Vf=zo,Gf=qi,zf=function(e,t,n){for(var r=pf(t),o=hf.f,i=ff.f,s=0;s<r.length;s++){var a=r[s];df(e,a)||n&&df(n,a)||o(e,a,i(t,a))}},Jf=Fo,Xf=In,Wf=Ee,Yf=function(e,t){gf(t)&&"cause"in t&&vf(e,"cause",t.cause)},Zf=function(e,t,n,r){Pf&&(Rf?Rf(e,t):xf(e,"stack",kf(n,r)))},Kf=qf,eh=function(e,t){return void 0===e?arguments.length<2?"":t:Mf(e)},th=Lt("toStringTag"),nh=Error,rh=[].push,oh=function(e,t){var n,r=Qf(ih,this);Gf?n=Gf(new nh,r?Vf(this):ih):(n=r?this:Jf(ih),Xf(n,th,"Error")),void 0!==t&&Xf(n,"message",eh(t)),Zf(n,oh,n.stack,1),arguments.length>2&&Yf(n,arguments[2]);var o=[];return Kf(e,rh,{that:o}),Xf(n,"errors",o),n};Gf?Gf(oh,nh):zf(oh,nh,{name:!0});var ih=oh.prototype=Jf(nh.prototype,{constructor:Wf(1,oh),message:Wf(1,""),name:Wf(1,"AggregateError")});Bf({global:!0,constructor:!0,arity:2},{AggregateError:oh});var sh,ah,ch,lh,uh=$,dh=qe,ph=E,fh=function(e){return dh.slice(0,e.length)===e},hh=fh("Bun/")?"BUN":fh("Cloudflare-Workers")?"CLOUDFLARE":fh("Deno/")?"DENO":fh("Node.js/")?"NODE":uh.Bun&&"string"==typeof Bun.version?"BUN":uh.Deno&&"object"==typeof Deno.version?"DENO":"process"===ph(uh.process)?"NODE":uh.window&&uh.document?"BROWSER":"REST",gh="NODE"===hh,vh=Fe,yh=_s,mh=pe,wh=Lt("species"),bh=Pl,Sh=st,Eh=TypeError,Ch=gn,xh=function(e){if(bh(e))return e;throw new Eh(Sh(e)+" is not a constructor")},kh=l,Ph=Lt("species"),Rh=function(e,t){var n,r=Ch(e).constructor;return void 0===r||kh(n=Ch(r)[Ph])?t:xh(n)},Oh=/(?:ipad|iphone|ipod).*applewebkit/i.test(qe),Ih=$,_h=ae,Uh=ln,Ah=P,Lh=m,Th=n,jh=So,Dh=Ks,Hh=zt,Fh=Zs,$h=Oh,Nh=gh,qh=Ih.setImmediate,Mh=Ih.clearImmediate,Bh=Ih.process,Qh=Ih.Dispatch,Vh=Ih.Function,Gh=Ih.MessageChannel,zh=Ih.String,Jh=0,Xh={},Wh="onreadystatechange";Th((function(){sh=Ih.location}));var Yh=function(e){if(Lh(Xh,e)){var t=Xh[e];delete Xh[e],t()}},Zh=function(e){return function(){Yh(e)}},Kh=function(e){Yh(e.data)},eg=function(e){Ih.postMessage(zh(e),sh.protocol+"//"+sh.host)};qh&&Mh||(qh=function(e){Fh(arguments.length,1);var t=Ah(e)?e:Vh(e),n=Dh(arguments,1);return Xh[++Jh]=function(){_h(t,void 0,n)},ah(Jh),Jh},Mh=function(e){delete Xh[e]},Nh?ah=function(e){Bh.nextTick(Zh(e))}:Qh&&Qh.now?ah=function(e){Qh.now(Zh(e))}:Gh&&!$h?(lh=(ch=new Gh).port2,ch.port1.onmessage=Kh,ah=Uh(lh.postMessage,lh)):Ih.addEventListener&&Ah(Ih.postMessage)&&!Ih.importScripts&&sh&&"file:"!==sh.protocol&&!Th(eg)?(ah=eg,Ih.addEventListener("message",Kh,!1)):ah=Wh in Hh("script")?function(e){jh.appendChild(Hh("script"))[Wh]=function(){jh.removeChild(this),Yh(e)}}:function(e){setTimeout(Zh(e),0)});var tg={set:qh,clear:Mh},ng=function(){this.head=null,this.tail=null};ng.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var rg,og,ig,sg,ag,cg=ng,lg=/ipad|iphone|ipod/i.test(qe)&&"undefined"!=typeof Pebble,ug=/web0s(?!.*chrome)/i.test(qe),dg=$,pg=xs,fg=ln,hg=tg.set,gg=cg,vg=Oh,yg=lg,mg=ug,wg=gh,bg=dg.MutationObserver||dg.WebKitMutationObserver,Sg=dg.document,Eg=dg.process,Cg=dg.Promise,xg=pg("queueMicrotask");if(!xg){var kg=new gg,Pg=function(){var e,t;for(wg&&(e=Eg.domain)&&e.exit();t=kg.get();)try{t()}catch(e){throw kg.head&&rg(),e}e&&e.enter()};vg||wg||mg||!bg||!Sg?!yg&&Cg&&Cg.resolve?((sg=Cg.resolve(void 0)).constructor=Cg,ag=fg(sg.then,sg),rg=function(){ag(Pg)}):wg?rg=function(){Eg.nextTick(Pg)}:(hg=fg(hg,dg),rg=function(){hg(Pg)}):(og=!0,ig=Sg.createTextNode(""),new bg(Pg).observe(ig,{characterData:!0}),rg=function(){ig.data=og=!og}),xg=function(e){kg.head||rg(),kg.add(e)}}var Rg=xg,Og=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Ig=$.Promise,_g=$,Ug=Ig,Ag=P,Lg=j,Tg=pl,jg=Lt,Dg=hh,Hg=Je,Fg=Ug&&Ug.prototype,$g=jg("species"),Ng=!1,qg=Ag(_g.PromiseRejectionEvent),Mg=Lg("Promise",(function(){var e=Tg(Ug),t=e!==String(Ug);if(!t&&66===Hg)return!0;if(!Fg.catch||!Fg.finally)return!0;if(!Hg||Hg<51||!/native code/.test(e)){var n=new Ug((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[$g]=r,!(Ng=n.then((function(){}))instanceof r))return!0}return!(t||"BROWSER"!==Dg&&"DENO"!==Dg||qg)})),Bg={CONSTRUCTOR:Mg,REJECTION_EVENT:qg,SUBCLASSING:Ng},Qg={},Vg=ut,Gg=TypeError,zg=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new Gg("Bad Promise constructor");t=e,n=r})),this.resolve=Vg(t),this.reject=Vg(n)};Qg.f=function(e){return new zg(e)};var Jg,Xg,Wg=qn,Yg=gh,Zg=$,Kg=ge,ev=Xo,tv=Ci,nv=function(e){var t=vh(e);mh&&t&&!t[wh]&&yh(t,wh,{configurable:!0,get:function(){return this}})},rv=ut,ov=P,iv=Ae,sv=Ts,av=Rh,cv=tg.set,lv=Rg,uv=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}},dv=Og,pv=cg,fv=Nr,hv=Ig,gv=Bg,vv=Qg,yv="Promise",mv=gv.CONSTRUCTOR,wv=gv.REJECTION_EVENT,bv=fv.getterFor(yv),Sv=fv.set,Ev=hv&&hv.prototype,Cv=hv,xv=Ev,kv=Zg.TypeError,Pv=Zg.document,Rv=Zg.process,Ov=vv.f,Iv=Ov,_v=!!(Pv&&Pv.createEvent&&Zg.dispatchEvent),Uv="unhandledrejection",Av=function(e){var t;return!(!iv(e)||!ov(t=e.then))&&t},Lv=function(e,t){var n,r,o,i=t.value,s=1===t.state,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&Fv(t),t.rejection=1),!0===a?n=i:(u&&u.enter(),n=a(i),u&&(u.exit(),o=!0)),n===e.promise?l(new kv("Promise-chain cycle")):(r=Av(n))?Kg(r,n,c,l):c(n)):l(i)}catch(e){u&&!o&&u.exit(),l(e)}},Tv=function(e,t){e.notified||(e.notified=!0,lv((function(){for(var n,r=e.reactions;n=r.get();)Lv(n,e);e.notified=!1,t&&!e.rejection&&Dv(e)})))},jv=function(e,t,n){var r,o;_v?((r=Pv.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Zg.dispatchEvent(r)):r={promise:t,reason:n},!wv&&(o=Zg["on"+e])?o(r):e===Uv&&uv("Unhandled promise rejection",n)},Dv=function(e){Kg(cv,Zg,(function(){var t,n=e.facade,r=e.value;if(Hv(e)&&(t=dv((function(){Yg?Rv.emit("unhandledRejection",r,n):jv(Uv,n,r)})),e.rejection=Yg||Hv(e)?2:1,t.error))throw t.value}))},Hv=function(e){return 1!==e.rejection&&!e.parent},Fv=function(e){Kg(cv,Zg,(function(){var t=e.facade;Yg?Rv.emit("rejectionHandled",t):jv("rejectionhandled",t,e.value)}))},$v=function(e,t,n){return function(r){e(t,r,n)}},Nv=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Tv(e,!0))},qv=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new kv("Promise can't be resolved itself");var r=Av(t);r?lv((function(){var n={done:!1};try{Kg(r,t,$v(qv,n,e),$v(Nv,n,e))}catch(t){Nv(n,t,e)}})):(e.value=t,e.state=1,Tv(e,!1))}catch(t){Nv({done:!1},t,e)}}};mv&&(xv=(Cv=function(e){sv(this,xv),rv(e),Kg(Jg,this);var t=bv(this);try{e($v(qv,t),$v(Nv,t))}catch(e){Nv(t,e)}}).prototype,(Jg=function(e){Sv(this,{type:yv,done:!1,notified:!1,parent:!1,reactions:new pv,rejection:!1,state:0,value:null})}).prototype=ev(xv,"then",(function(e,t){var n=bv(this),r=Ov(av(this,Cv));return n.parent=!0,r.ok=!ov(e)||e,r.fail=ov(t)&&t,r.domain=Yg?Rv.domain:void 0,0===n.state?n.reactions.add(r):lv((function(){Lv(r,n)})),r.promise})),Xg=function(){var e=new Jg,t=bv(e);this.promise=e,this.resolve=$v(qv,t),this.reject=$v(Nv,t)},vv.f=Ov=function(e){return e===Cv||undefined===e?new Xg(e):Iv(e)}),Wg({global:!0,constructor:!0,wrap:!0,forced:mv},{Promise:Cv}),tv(Cv,yv,!1,!0),nv(yv);var Mv=Lt("iterator"),Bv=!1;try{var Qv=0,Vv={next:function(){return{done:!!Qv++}},return:function(){Bv=!0}};Vv[Mv]=function(){return this},Array.from(Vv,(function(){throw 2}))}catch(e){}var Gv=Ig,zv=function(e,t){try{if(!t&&!Bv)return!1}catch(e){return!1}var n=!1;try{var r={};r[Mv]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Jv=Bg.CONSTRUCTOR||!zv((function(e){Gv.all(e).then(void 0,(function(){}))})),Xv=ge,Wv=ut,Yv=Qg,Zv=Og,Kv=qf;qn({target:"Promise",stat:!0,forced:Jv},{all:function(e){var t=this,n=Yv.f(t),r=n.resolve,o=n.reject,i=Zv((function(){var n=Wv(t.resolve),i=[],s=0,a=1;Kv(e,(function(e){var c=s++,l=!1;a++,Xv(n,t,e).then((function(e){l||(l=!0,i[c]=e,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise}});var ey=qn,ty=Bg.CONSTRUCTOR;Ig&&Ig.prototype,ey({target:"Promise",proto:!0,forced:ty,real:!0},{catch:function(e){return this.then(void 0,e)}});var ny=ge,ry=ut,oy=Qg,iy=Og,sy=qf;qn({target:"Promise",stat:!0,forced:Jv},{race:function(e){var t=this,n=oy.f(t),r=n.reject,o=iy((function(){var o=ry(t.resolve);sy(e,(function(e){ny(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var ay=Qg;qn({target:"Promise",stat:!0,forced:Bg.CONSTRUCTOR},{reject:function(e){var t=ay.f(this);return(0,t.reject)(e),t.promise}});var cy=gn,ly=Ae,uy=Qg,dy=function(e,t){if(cy(e),ly(t)&&t.constructor===e)return t;var n=uy.f(e);return(0,n.resolve)(t),n.promise},py=qn,fy=Ig,hy=Bg.CONSTRUCTOR,gy=dy,vy=Fe("Promise"),yy=!hy;py({target:"Promise",stat:!0,forced:true},{resolve:function(e){return gy(yy&&this===vy?fy:this,e)}});var my=ge,wy=ut,by=Qg,Sy=Og,Ey=qf;qn({target:"Promise",stat:!0,forced:Jv},{allSettled:function(e){var t=this,n=by.f(t),r=n.resolve,o=n.reject,i=Sy((function(){var n=wy(t.resolve),o=[],i=0,s=1;Ey(e,(function(e){var a=i++,c=!1;s++,my(n,t,e).then((function(e){c||(c=!0,o[a]={status:"fulfilled",value:e},--s||r(o))}),(function(e){c||(c=!0,o[a]={status:"rejected",reason:e},--s||r(o))}))})),--s||r(o)}));return i.error&&o(i.value),n.promise}});var Cy=ge,xy=ut,ky=Fe,Py=Qg,Ry=Og,Oy=qf,Iy="No one promise resolved";qn({target:"Promise",stat:!0,forced:Jv},{any:function(e){var t=this,n=ky("AggregateError"),r=Py.f(t),o=r.resolve,i=r.reject,s=Ry((function(){var r=xy(t.resolve),s=[],a=0,c=1,l=!1;Oy(e,(function(e){var u=a++,d=!1;c++,Cy(r,t,e).then((function(e){d||l||(l=!0,o(e))}),(function(e){d||l||(d=!0,s[u]=e,--c||i(new n(s,Iy)))}))})),--c||i(new n(s,Iy))}));return s.error&&i(s.value),r.promise}});var _y=Qg;qn({target:"Promise",stat:!0},{withResolvers:function(){var e=_y.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var Uy=qn,Ay=Ig,Ly=n,Ty=Fe,jy=P,Dy=Rh,Hy=dy,Fy=Ay&&Ay.prototype;Uy({target:"Promise",proto:!0,real:!0,forced:!!Ay&&Ly((function(){Fy.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Dy(this,Ty("Promise")),n=jy(e);return this.then(n?function(n){return Hy(t,e()).then((function(){return n}))}:e,n?function(n){return Hy(t,e()).then((function(){throw n}))}:e)}});var $y=Le.Promise,Ny={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},qy=$,My=Ci,By=wr;for(var Qy in Ny)My(qy[Qy],Qy),By[Qy]=By.Array;var Vy=$y,Gy=qn,zy=ae,Jy=Ks,Xy=Qg,Wy=ut,Yy=Og,Zy=$.Promise,Ky=!1;Gy({target:"Promise",stat:!0,forced:!Zy||!Zy.try||Yy((function(){Zy.try((function(e){Ky=8===e}),8)})).error||!Ky},{try:function(e){var t=arguments.length>1?Jy(arguments,1):[],n=Xy.f(this),r=Yy((function(){return zy(Wy(e),void 0,t)}));return(r.error?n.reject:n.resolve)(r.value),n.promise}});var em=t(Vy),tm=fr("Array","values"),nm=hi,rm=m,om=ne,im=tm,sm=Array.prototype,am={DOMTokenList:!0,NodeList:!0},cm=t((function(e){var t=e.values;return e===sm||om(sm,e)&&t===sm.values||rm(am,nm(e))?im:t})),lm=qf,um=_l;qn({target:"Object",stat:!0},{fromEntries:function(e){var t={};return lm(e,(function(e,n){um(t,e,n)}),{AS_ENTRIES:!0}),t}});var dm=t(Le.Object.fromEntries),pm="\t\n\v\f\r                　\u2028\u2029\ufeff",fm=p,hm=Hs,gm=pm,vm=c("".replace),ym=RegExp("^["+gm+"]+"),mm=RegExp("(^|[^"+gm+"])["+gm+"]+$"),wm=function(e){return function(t){var n=hm(fm(t));return 1&e&&(n=vm(n,ym,"")),2&e&&(n=vm(n,mm,"$1")),n}},bm={start:wm(1),end:wm(2),trim:wm(3)},Sm=Gr.PROPER,Em=n,Cm=pm,xm=bm.trim;qn({target:"String",proto:!0,forced:function(e){return Em((function(){return!!Cm[e]()||"​᠎"!=="​᠎"[e]()||Sm&&Cm[e].name!==e}))}("trim")},{trim:function(){return xm(this)}});var km=fr("String","trim"),Pm=ne,Rm=km,Om=String.prototype,Im=t((function(e){var t=e.trim;return"string"==typeof e||e===Om||Pm(Om,e)&&t===Om.trim?Rm:t})),_m=g,Um=fo;qn({target:"Object",stat:!0,forced:n((function(){Um(1)}))},{keys:function(e){return Um(_m(e))}});var Am=c,Lm=m,Tm=SyntaxError,jm=parseInt,Dm=String.fromCharCode,Hm=Am("".charAt),Fm=Am("".slice),$m=Am(/./.exec),Nm={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},qm=/^[\da-f]{4}$/i,Mm=/^[\u0000-\u001F]$/,Bm=qn,Qm=pe,Vm=$,Gm=Fe,zm=c,Jm=ge,Xm=P,Wm=Ae,Ym=x,Zm=m,Km=Hs,ew=Wn,tw=_l,nw=n,rw=function(e,t){for(var n=!0,r="";t<e.length;){var o=Hm(e,t);if("\\"===o){var i=Fm(e,t,t+2);if(Lm(Nm,i))r+=Nm[i],t+=2;else{if("\\u"!==i)throw new Tm('Unknown escape sequence: "'+i+'"');var s=Fm(e,t+=2,t+4);if(!$m(qm,s))throw new Tm("Bad Unicode escape at: "+t);r+=Dm(jm(s,16)),t+=4}}else{if('"'===o){n=!1,t++;break}if($m(Mm,o))throw new Tm("Bad control character in string literal at: "+t);r+=o,t++}}if(n)throw new Tm("Unterminated string at: "+t);return{value:r,end:t}},ow=Ze,iw=Vm.JSON,sw=Vm.Number,aw=Vm.SyntaxError,cw=iw&&iw.parse,lw=Gm("Object","keys"),uw=Object.getOwnPropertyDescriptor,dw=zm("".charAt),pw=zm("".slice),fw=zm(/./.exec),hw=zm([].push),gw=/^\d$/,vw=/^[1-9]$/,yw=/^[\d-]$/,mw=/^[\t\n\r ]$/,ww=function(e,t,n,r){var o,i,s,a,c,l=e[t],u=r&&l===r.value,d=u&&"string"==typeof r.source?{source:r.source}:{};if(Wm(l)){var p=Ym(l),f=u?r.nodes:p?[]:{};if(p)for(o=f.length,s=ew(l),a=0;a<s;a++)bw(l,a,ww(l,""+a,n,a<o?f[a]:void 0));else for(i=lw(l),s=ew(i),a=0;a<s;a++)c=i[a],bw(l,c,ww(l,c,n,Zm(f,c)?f[c]:void 0))}return Jm(n,e,t,l,d)},bw=function(e,t,n){if(Qm){var r=uw(e,t);if(r&&!r.configurable)return}void 0===n?delete e[t]:tw(e,t,n)},Sw=function(e,t,n,r){this.value=e,this.end=t,this.source=n,this.nodes=r},Ew=function(e,t){this.source=e,this.index=t};Ew.prototype={fork:function(e){return new Ew(this.source,e)},parse:function(){var e=this.source,t=this.skip(mw,this.index),n=this.fork(t),r=dw(e,t);if(fw(yw,r))return n.number();switch(r){case"{":return n.object();case"[":return n.array();case'"':return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null)}throw new aw('Unexpected character: "'+r+'" at: '+t)},node:function(e,t,n,r,o){return new Sw(t,r,e?null:pw(this.source,n,r),o)},object:function(){for(var e=this.source,t=this.index+1,n=!1,r={},o={};t<e.length;){if(t=this.until(['"',"}"],t),"}"===dw(e,t)&&!n){t++;break}var i=this.fork(t).string(),s=i.value;t=i.end,t=this.until([":"],t)+1,t=this.skip(mw,t),i=this.fork(t).parse(),tw(o,s,i),tw(r,s,i.value),t=this.until([",","}"],i.end);var a=dw(e,t);if(","===a)n=!0,t++;else if("}"===a){t++;break}}return this.node(1,r,this.index,t,o)},array:function(){for(var e=this.source,t=this.index+1,n=!1,r=[],o=[];t<e.length;){if(t=this.skip(mw,t),"]"===dw(e,t)&&!n){t++;break}var i=this.fork(t).parse();if(hw(o,i),hw(r,i.value),t=this.until([",","]"],i.end),","===dw(e,t))n=!0,t++;else if("]"===dw(e,t)){t++;break}}return this.node(1,r,this.index,t,o)},string:function(){var e=this.index,t=rw(this.source,this.index+1);return this.node(0,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,n=t;if("-"===dw(e,n)&&n++,"0"===dw(e,n))n++;else{if(!fw(vw,dw(e,n)))throw new aw("Failed to parse number at: "+n);n=this.skip(gw,n+1)}if(("."===dw(e,n)&&(n=this.skip(gw,n+1)),"e"===dw(e,n)||"E"===dw(e,n))&&(n++,"+"!==dw(e,n)&&"-"!==dw(e,n)||n++,n===(n=this.skip(gw,n))))throw new aw("Failed to parse number's exponent value at: "+n);return this.node(0,sw(pw(e,t,n)),t,n)},keyword:function(e){var t=""+e,n=this.index,r=n+t.length;if(pw(this.source,n,r)!==t)throw new aw("Failed to parse value at: "+n);return this.node(0,e,n,r)},skip:function(e,t){for(var n=this.source;t<n.length&&fw(e,dw(n,t));t++);return t},until:function(e,t){t=this.skip(mw,t);for(var n=dw(this.source,t),r=0;r<e.length;r++)if(e[r]===n)return t;throw new aw('Unexpected character: "'+n+'" at: '+t)}};var Cw=nw((function(){var e,t="9007199254740993";return cw(t,(function(t,n,r){e=r.source})),e!==t})),xw=ow&&!nw((function(){return 1/cw("-0 \t")!=-1/0}));Bm({target:"JSON",stat:!0,forced:Cw},{parse:function(e,t){return xw&&!Xm(t)?cw(e):function(e,t){e=Km(e);var n=new Ew(e,0),r=n.parse(),o=r.value,i=n.skip(mw,r.end);if(i<e.length)throw new aw('Unexpected extra character: "'+dw(e,i)+'" after the parsed data at: '+i);return Xm(t)?ww({"":o},"",t,r):o}(e,t)}});var kw=t(Le.JSON.parse),Pw=uf,Rw=_e,Ow=de,Iw=_l;qn({target:"Object",stat:!0,sham:!pe},{getOwnPropertyDescriptors:function(e){for(var t,n,r=Rw(e),o=Ow.f,i=Pw(r),s={},a=0;i.length>a;)void 0!==(n=o(r,t=i[a++]))&&Iw(s,t,n);return s}});var _w=t(Le.Object.getOwnPropertyDescriptors);function Uw(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):em.resolve(c).then(r,o)}function Aw(e){return function(){var t=this,n=arguments;return new em((function(r,o){var i=e.apply(t,n);function s(e){Uw(i,r,o,s,a,"next",e)}function a(e){Uw(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),mr(n).apply(n,r)}return n}function Tw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(n),!0).forEach((function(t){jw(e,t,n[t])})):_w?Object.defineProperties(e,_w(n)):Lw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dw(){return{pageUrl:Hw(),referrer:Fw((()=>{var e;return null===(e=window.top)||void 0===e?void 0:e.document.referrer}))}}function Hw(){const e=Fw((()=>window.location.ancestorOrigins))||[],t=[];let n,r=window;for(;r!==top;)mr(t).call(t,r),r=r.parent;mr(t).call(t,r);for(let r=t.length-1;r>=0&&!n;r--)n=Fw((()=>t[r].location.href)),0!==r&&(n||(n=Fw((()=>t[r-1].document.referrer))),n||(n=e[r-1]));return null!=n?new op(n):void 0}function Fw(e){try{return e()}catch(e){return}}function $w(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?null!==(n=e&&(null===(r=Object.getPrototypeOf(e))||void 0===r||null===(r=r.constructor)||void 0===r?void 0:r.name))&&void 0!==n?n:"null":t;var n,r}function Nw(e,t,n,r,o){var i,s,a,c,l,u,d,p;const f=o&&"input"in o?o.input:n.value,h=null!==(i=null!==(s=null==o?void 0:o.expected)&&void 0!==s?s:e.expects)&&void 0!==i?i:null,g=null!==(a=null==o?void 0:o.received)&&void 0!==a?a:$w(f),v={kind:e.kind,type:e.type,input:f,expected:h,received:g,message:`Invalid ${t}: ${h?`Expected ${h} but r`:"R"}eceived ${g}`,requirement:e.requirement,path:null==o?void 0:o.path,issues:null==o?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},y="schema"===e.kind,m=null!==(c=null!==(l=null!==(u=null!==(d=null!==(p=null==o?void 0:o.message)&&void 0!==p?p:e.message)&&void 0!==d?d:(e.reference,void v.lang))&&void 0!==u?u:y?void v.lang:null)&&void 0!==l?l:r.message)&&void 0!==c?c:void v.lang;var w;(m&&(v.message="function"==typeof m?m(v):m),y&&(n.typed=!1),n.issues)?mr(w=n.issues).call(w,v):n.issues=[v]}function qw(e,t){return ip(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function Mw(e,t){var n;const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:null!==(n=r[0])&&void 0!==n?n:"never"}function Bw(e){return{kind:"transformation",type:"transform",reference:Bw,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function Qw(e,t){return{kind:"schema",type:"array",reference:Qw,expects:"Array",async:!1,item:e,message:t,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let s=0;s<n.length;s++){var r;const a=n[s],c=this.item._run({typed:!1,value:a},t);if(c.issues){const r={type:"array",origin:"value",input:n,key:s,value:a};for(const t of c.issues){var o,i;if(t.path)yp(i=t.path).call(i,r);else t.path=[r];null===(o=e.issues)||void 0===o||mr(o).call(o,t)}if(e.issues||(e.issues=c.issues),t.abortEarly){e.typed=!1;break}}c.typed||(e.typed=!1),mr(r=e.value).call(r,c.value)}}else Nw(this,"type",e,t);return e}}}function Vw(e){return{kind:"schema",type:"boolean",reference:Vw,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:Nw(this,"type",e,t),e}}}function Gw(e,t){return{kind:"schema",type:"custom",reference:Gw,expects:"unknown",async:!1,check:e,message:t,_run(e,t){return this.check(e.value)?e.typed=!0:Nw(this,"type",e,t),e}}}function zw(e){return{kind:"schema",type:"lazy",reference:zw,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function Jw(e,t){return{kind:"schema",type:"literal",reference:Jw,expects:$w(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:Nw(this,"type",e,t),e}}}function Xw(e,t){return{kind:"schema",type:"loose_object",reference:Xw,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const i in this.entries){const s=n[i],a=this.entries[i]._run({typed:!1,value:s},t);if(a.issues){const c={type:"object",origin:"value",input:n,key:i,value:s};for(const t of a.issues){var r,o;if(t.path)yp(o=t.path).call(o,c);else t.path=[c];null===(r=e.issues)||void 0===r||mr(r).call(r,t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),(void 0!==a.value||i in n)&&(e.value[i]=a.value)}if(!e.issues||!t.abortEarly)for(const t in n)qw(n,t)&&!(t in this.entries)&&(e.value[t]=n[t])}else Nw(this,"type",e,t);return e}}}function Ww(e){return{kind:"schema",type:"number",reference:Ww,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?Nw(this,"type",e,t):e.typed=!0,e}}}function Yw(e,t){return{kind:"schema",type:"object",reference:Yw,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const i in this.entries){const s=n[i],a=this.entries[i]._run({typed:!1,value:s},t);if(a.issues){const c={type:"object",origin:"value",input:n,key:i,value:s};for(const t of a.issues){var r,o;if(t.path)yp(o=t.path).call(o,c);else t.path=[c];null===(r=e.issues)||void 0===r||mr(r).call(r,t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),(void 0!==a.value||i in n)&&(e.value[i]=a.value)}}else Nw(this,"type",e,t);return e}}}function Zw(e,...t){const n={kind:"schema",type:"optional",reference:Zw,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=function(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function Kw(e,t,n){return{kind:"schema",type:"record",reference:Kw,expects:"Object",async:!1,key:e,value:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const s in n)if(qw(n,s)){const a=n[s],c=this.key._run({typed:!1,value:s},t);if(c.issues){const o={type:"object",origin:"key",input:n,key:s,value:a};for(const t of c.issues){var r;t.path=[o],null===(r=e.issues)||void 0===r||mr(r).call(r,t)}if(e.issues||(e.issues=c.issues),t.abortEarly){e.typed=!1;break}}const l=this.value._run({typed:!1,value:a},t);if(l.issues){const r={type:"object",origin:"value",input:n,key:s,value:a};for(const t of l.issues){var o,i;if(t.path)yp(i=t.path).call(i,r);else t.path=[r];null===(o=e.issues)||void 0===o||mr(o).call(o,t)}if(e.issues||(e.issues=l.issues),t.abortEarly){e.typed=!1;break}}c.typed&&l.typed||(e.typed=!1),c.typed&&(e.value[c.value]=l.value)}}else Nw(this,"type",e,t);return e}}}function eb(e){return{kind:"schema",type:"string",reference:eb,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:Nw(this,"type",e,t),e}}}function tb(e){let t;if(e)for(const n of e)t?mr(t).call(t,...n.issues):t=n.issues;return t}function nb(e,t){return{kind:"schema",type:"union",reference:nb,expects:Mw(e.map((e=>e.expects)),"|"),async:!1,options:e,message:t,_run(e,t){var n;let r,o,i;for(const n of this.options){const s=n._run({typed:!1,value:e.value},t);if(s.typed){if(!s.issues){r=s;break}o?mr(o).call(o,s):o=[s]}else i?mr(i).call(i,s):i=[s]}if(r)return r;if(o){if(1===o.length)return o[0];Nw(this,"type",e,t,{issues:tb(o)}),e.typed=!0}else{if(1===(null===(n=i)||void 0===n?void 0:n.length))return i[0];Nw(this,"type",e,t,{issues:tb(i)})}return e}}}function rb(e,t,n){return{kind:"schema",type:"variant",reference:rb,expects:"Object",async:!1,key:e,options:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){let r,o=0,i=this.key,s=[];const a=(e,c)=>{for(const l of e.options){if("variant"===l.type)a(l,new Set(c).add(l.key));else{let e=!0,a=0;for(const r of c){if(l.entries[r]._run({typed:!1,value:n[r]},t).issues){e=!1,i!==r&&(o<a||o===a&&r in n&&!(i in n))&&(o=a,i=r,s=[]),i===r&&mr(s).call(s,l.entries[r].expects);break}a++}if(e){const e=l._run({typed:!1,value:n},t);(!r||!r.typed&&e.typed)&&(r=e)}}if(r&&!r.issues)break}};if(a(this,new Set([this.key])),r)return r;Nw(this,"type",e,t,{input:n[i],expected:Mw(s,"|"),path:[{type:"object",origin:"value",input:n,key:i,value:n[i]}]})}else Nw(this,"type",e,t);return e}}}function ob(e,t){const n={};for(const t in e.entries)n[t]=Zw(e.entries[t]);return Tw(Tw({},e),{},{entries:n})}function ib(...e){return Tw(Tw({},e[0]),{},{pipe:e,_run(t,n){for(const r of e)if("metadata"!==r.kind){if(t.issues&&("schema"===r.kind||"transformation"===r.kind)){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=r._run(t,n))}return t}})}function sb(e,t,n){const r=e._run({typed:!1,value:t},function(e){var t,n,r;return{lang:null!==(t=null==e?void 0:e.lang)&&void 0!==t?t:void 0,message:null==e?void 0:e.message,abortEarly:null!==(n=null==e?void 0:e.abortEarly)&&void 0!==n?n:void 0,abortPipeEarly:null!==(r=null==e?void 0:e.abortPipeEarly)&&void 0!==r?r:void 0}}(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}function ab(e){const t=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt("0x"+t,16))));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}const cb=nb([eb(),Ww(),Vw()]),lb=Kw(eb(),nb([cb,Qw(cb)]));class ub{constructor(e=[]){jw(this,"tuples",void 0),this.tuples=e}static empty(){return new ub}add(e,t,n={}){const{stripEmpty:r=!0,prepend:o=!1,base64UrlEncode:i=!1}=n;if(""===e)return this;if(r&&""===t)return this;let s;var a,c;return s=i?ab(t.toString()):t,o?(yp(a=this.tuples).call(a,[e,s]),this):(mr(c=this.tuples).call(c,[e,s]),this)}valuesFor(e){return this.tuples.filter((([t])=>t===e)).map((([,e])=>e))}addOptional(e,t,n={}){return null!=t?this.add(e,t,n):this}addParamsMap(e){for(const t in e){const n=e[t];Array.isArray(n)?n.forEach((e=>this.add(t,e))):this.add(t,n)}return this}addExternalIdCookies(e){return e.forEach((e=>{this.addOptional("ic",e.value,{stripEmpty:!1}).addOptional("icn",e.name,{stripEmpty:!1})})),this}copy(){return new ub(this.tuples.slice())}build(){let e="";return this.tuples.forEach((([t,n])=>{const r=0===e.length?"?":"&";e=`${e}${r}${encodeURIComponent(t)}=${encodeURIComponent(n)}`})),e}}class db extends Error{constructor(e,t,n){super(t,n),jw(this,"cause",void 0),this.name=e,n&&n.cause&&(this.cause=n.cause)}}class pb extends db{constructor(){super("BlockedByConsentError","Blocked by consent settings")}}function fb(e){return e instanceof pb||e instanceof Error&&null!=e.cause&&fb(e.cause)}const hb=120;class gb{constructor(e){var t;jw(this,"callHandler",void 0),jw(this,"baseQuery",void 0),jw(this,"pixelBaseUrl",void 0),jw(this,"sampleRate",void 0),this.callHandler=e.callHandler;const n=Dw();let r;null!=n.pageUrl&&(r=new op(n.pageUrl),r.search=""),this.baseQuery=ub.empty().add("tv",e.version).addOptional("refr",n.referrer).addOptional("pu",null===(t=r)||void 0===t?void 0:t.toString()),this.pixelBaseUrl=e.pixelBaseUrl,this.sampleRate=e.sampleRate}handleEvent(e){var t=this;return Aw((function*(){if("error"===e.level&&!fb(e.error)){const n=function(e){const t=[];let n=e;for(;null!=n&&"object"==typeof n&&n instanceof Error;)mr(t).call(t,{name:n.name.substring(0,hb),message:n.message.substring(0,hb),stackTrace:vb(n).substring(0,1e3)}),n=n.cause;return t}(e.error);for(const r of n)if(t.isSampled())try{yield t.sendError(r,e.context)}catch(e){}}}))()}isSampled(){return Math.random()<=this.sampleRate}sendError(e,t){const n=null!=t&&"appId"in t&&"string"==typeof t.appId?t.appId:void 0,r=null!=t&&"distributorId"in t&&"string"==typeof t.distributorId?t.distributorId:void 0,o=this.baseQuery.copy().addOptional("aid",n).addOptional("did",r).add("ae",JSON.stringify(e),{base64UrlEncode:!0}).build(),i=`${this.pixelBaseUrl}/p${o}`;return this.callHandler.pixelGet(i)}}function vb(e){let t=e;const n=[];for(;null!=t&&"object"==typeof t&&t instanceof Error;){const e=(r=t.message,o=hb,null!=r?r.substring(0,o):void 0);mr(n).call(n,null!=e?e:"No message available"),t=t.cause}var r,o;return n.join("\ncaused by: ")}function yb(e){let t=window,n=null;for(;!n;){try{e in t.frames&&(n=t)}catch(e){}if(t===window.top||!t.parent)break;t=t.parent}return n}function mb(e){var t;return e.gdpr&&e.gdpr.gdprApplies||e.gpp&&Fp(t=e.gpp.applicableSections).call(t,2)||!1}class wb{fromConsent(e,t){return mb(e)?(t.info("Using blocked call handler due to privacy mode"),new bb):new Sb(t)}}class bb{ajaxGet(){return Aw((function*(){throw new pb}))()}pixelGet(){return Aw((function*(){throw new pb}))()}}class Sb{constructor(e){jw(this,"logger",void 0),this.logger=e}ajaxGet(e){var t=this;return Aw((function*(){const n=t,{url:r,responseHandler:o,headers:i}=e,s=e.timeout||5e3;const a=yield new em(((e,t)=>{null!=window.XMLHttpRequest?function(e,t){const o=new XMLHttpRequest,a=Mp();if(o.onreadystatechange=()=>{4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?e({getBodyAsText:()=>o.responseText,expiresAt:n.responseExpires(o)}):t(new xb(`Error during XHR call: ${o.status}, url: ${r}`)))},o.ontimeout=()=>{const e=Mp()-a;t(new xb(`Timeout after ${e} (${s}), url: ${r}`))},o.open("GET",r,!0),o.timeout=s,o.withCredentials=!0,null!=i)for(const[e,t]of ef(i))null!=t&&o.setRequestHeader(e,t);o.send()}(e,t):null!=window.XDomainRequest?function(e,t){const o=new window.XDomainRequest,a=Mp();o.onprogress=()=>{},o.onload=()=>e({getBodyAsText:()=>o.responseText}),o.onerror=()=>t(new kb(`Error during XDR call: ${o.responseText}, url: ${r}`)),o.ontimeout=()=>{const e=Mp()-a;t(new kb(`Timeout after ${e} (${s}), url: ${r}`))},o.open("GET",r),o.timeout=s,null!=i&&n.logger.error(new Rb),o.send()}(e,t):t(new Cb("No supported request api found"))})).catch((e=>{throw new Cb(`Failed sending request to url ${r}`,e)}));return{data:o.apply(a),expiresAt:a.expiresAt}}))()}pixelGet(e){return Aw((function*(){const t=new Image;return t.src=e,new em(((n,r)=>{t.onload=()=>n(),t.onerror=()=>r(new Eb(`Failed loading pixel: ${e}`))}))}))()}responseExpires(e){const t=e.getResponseHeader("expires");if(t)try{return new Date(t)}catch(e){return void this.logger.error(new Pb(t))}}}class Eb extends db{constructor(e){super("PixelError",e)}}class Cb extends db{constructor(e,t){super("RequestError",e,{cause:t})}}class xb extends db{constructor(e){super("XhrRequestError",e)}}class kb extends db{constructor(e){super("XdrRequestError",e)}}class Pb extends db{constructor(e){super("ExpiresHeaderParsingError","Failed parsing expires header"),jw(this,"expiresHeader",void 0),this.expiresHeader=e}}class Rb extends db{constructor(){super("CustomHeadersUnsupportedError","Tried to send custom headers via XDR")}}const Ob="1.1",Ib="1.0",_b="__gppLocator";function Ub(e){return Ab.apply(this,arguments)}function Ab(){return Ab=Aw((function*(e){let t;return"function"==typeof window.__gpp?yield function(e){return Lb.apply(this,arguments)}(window.__gpp):(t=yb(_b))?yield function(e){return Tb.apply(this,arguments)}(t):void e.info("GPP API not found")})),Ab.apply(this,arguments)}function Lb(){return Lb=Aw((function*(e){const t={};return yield new em(((n,r)=>{const o=e("addEventListener",((e,o)=>jb({evt:e,success:o,resolve:n,reject:r,state:t})),void 0,Ob);o&&jb({evt:o,success:!0,resolve:n,reject:r,state:t})})).finally((()=>{t.listenerId&&e("removeEventListener",(()=>{}),t.listenerId,Ob)}))})),Lb.apply(this,arguments)}function Tb(){return(Tb=Aw((function*(e){const t=`li_gpp_call_${Math.random()}`;let n;const r={};return yield new em(((o,i)=>{n=e=>{var n;const s=null==e||null===(n=e.data)||void 0===n?void 0:n.__gppReturn;(null==s?void 0:s.callId)===t&&jb({evt:s.returnValue,success:s.success,resolve:o,reject:i,state:r})},window.addEventListener("message",n,!1);const s={__gppCall:{command:"addEventListener",version:Ob,callId:t}};e.postMessage(s,"*")})).finally((()=>{if(window.removeEventListener("message",n,!1),r.listenerId){const n={__gppCall:{command:"removeEventListener",version:Ob,callId:t,parameter:r.listenerId}};e.postMessage(n,"*")}}))}))).apply(this,arguments)}function jb({evt:e,success:t,resolve:n,reject:r,state:o}){if("number"==typeof(null==e?void 0:e.listenerId)&&(o.listenerId=e.listenerId),null==t||t||r(Error("Failed registering GPP event listener")),e.pingData)if(e.pingData.gppVersion){const t=e.pingData,o=t.gppVersion.toString();o!==Ob&&o!==Ib?r(Error(`unsupported GPP version ${t.gppVersion}`)):"ready"===t.signalStatus&&Db(e.pingData,n)}else try{Db(e.pingData,n)}catch(e){r(Error("Failed to handle GPP event",{cause:e}))}}function Db(e,t){"ready"===e.signalStatus&&t({consentString:e.gppString,applicableSections:e.applicableSections})}const Hb="__tcfapiLocator";function Fb(e){return $b.apply(this,arguments)}function $b(){return $b=Aw((function*(e){let t;return"function"==typeof window.__tcfapi?yield function(e){return Nb.apply(this,arguments)}(window.__tcfapi):(t=yb(Hb))?yield function(e){return qb.apply(this,arguments)}(t):void e.info("TCF API not found")})),$b.apply(this,arguments)}function Nb(){return Nb=Aw((function*(e){const t={};return yield new em(((n,r)=>{e("addEventListener",2,((e,o)=>Mb(e,o,n,r,t)))})).finally((()=>{t.listenerId&&e("removeEventListener",2,(()=>{}),t.listenerId)}))})),Nb.apply(this,arguments)}function qb(){return(qb=Aw((function*(e){const t=Bb();let n;const r={};return yield new em(((o,i)=>{n=e=>{var n;const s=null==e||null===(n=e.data)||void 0===n?void 0:n.__tcfapiReturn;null!=s&&s.success||i(Error("Failed to register TCF API event listener")),(null==s?void 0:s.callId)===t&&Mb(s.returnValue,s.success,o,i,r)},window.addEventListener("message",n,!1);const s={__tcfapiCall:{command:"addEventListener",version:2,callId:t}};e.postMessage(s,"*")})).finally((()=>{if(window.removeEventListener("message",n,!1),r.listenerId){const t={__tcfapiCall:{command:"removeEventListener",version:2,callId:Bb(),parameter:r.listenerId}};e.postMessage(t,"*")}}))}))).apply(this,arguments)}function Mb(e,t,n,r,o){"number"==typeof(null==e?void 0:e.listenerId)&&(o.listenerId=e.listenerId),t?"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||n({gdprApplies:null==e.gdprApplies?void 0:!!e.gdprApplies,consentString:e.tcString}):r(Error("Failed to register TCF API event listener"))}function Bb(){return`li_tcf_call_${Math.random()}`}const Qb="__uspapiLocator";function Vb(e){return Gb.apply(this,arguments)}function Gb(){return Gb=Aw((function*(e){let t;return"function"==typeof window.__uspapi?yield function(e){return zb.apply(this,arguments)}(window.__uspapi):(t=yb(Qb))?yield function(e){return Jb.apply(this,arguments)}(t):void e.info("USP API not found")})),Gb.apply(this,arguments)}function zb(){return zb=Aw((function*(e){return yield new em(((t,n)=>{e("getUSPData",1,((e,r)=>Xb(e,r,t,n)))}))})),zb.apply(this,arguments)}function Jb(){return(Jb=Aw((function*(e){const t=`li_uspapi_call_${Math.random()}`;let n;const r=new em(((r,o)=>{n=e=>{var n;const i=null==e||null===(n=e.data)||void 0===n?void 0:n.__uspapiReturn;(null==i?void 0:i.callId)===t&&Xb(i.returnValue,i.success,r,o)},window.addEventListener("message",n,!1);const i={__uspapiCall:{command:"getUSPData",version:1,callId:t}};e.postMessage(i,"*")}));return yield r.finally((()=>{window.removeEventListener("message",n,!1)}))}))).apply(this,arguments)}function Xb(e,t,n,r){t&&"string"==typeof e.uspString?n({consentString:e.uspString}):r(Error("Response from USP API frame was not successful"))}class Wb{constructor(e){jw(this,"logger",void 0),jw(this,"cachedConsent",void 0),this.logger=e}loadConsent(){var e=this;return Aw((function*(){return e.cachedConsent||(e.cachedConsent=e.loadConsentUncached()),yield e.cachedConsent}))()}loadConsentUncached(){var e=this;return Aw((function*(){return{gdpr:yield Yb(Fb(e.logger).catch((()=>{})),100),gpp:yield Yb(Ub(e.logger).catch((()=>{})),100),usPrivacy:yield Yb(Vb(e.logger).catch((()=>{})),100)}}))()}}function Yb(e,t){return Zb.apply(this,arguments)}
/*! js-cookie v3.0.5 | MIT */function Zb(){return(Zb=Aw((function*(e,t){let n;return yield em.race([e,new em((e=>{n=setTimeout((()=>e(void 0)),t)}))]).finally((()=>clearTimeout(n)))}))).apply(this,arguments)}function Kb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var eS=function e(t,n){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=Kb({},n,o)).expires&&(o.expires=new Date(Mp()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=t.read(s,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",Kb({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Kb({},this.attributes,t))},withConverter:function(t){return e(Kb({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class tS{unrestricted(e){return new rS(e)}fromConsent(e,t){return mb(e)?(t.info("Using blocked storage handler due to privacy mode"),new nS):new rS(t)}}class nS{getCookie(){throw new pb}setCookie(){throw new pb}deleteCookie(){throw new pb}findSimilarCookies(){throw new pb}localStorageIsEnabled(){throw new pb}getDataFromLocalStorage(){throw new pb}setDataInLocalStorage(){throw new pb}removeDataFromLocalStorage(){throw new pb}compatibleWithConsent(){return!0}}class rS{constructor(e){jw(this,"logger",void 0),jw(this,"cachedLocalStorageIsEnabled",void 0),this.logger=e}getCookie(e){try{return eS.get(e)}catch(e){this.logger.error(new oS("Failed fetching from cookie jar",e))}}setCookie(e,t,n){try{eS.set(e,t,n||{})}catch(e){this.logger.error(new oS("Failed setting cookie",e))}}deleteCookie(e,t){try{eS.remove(e,{domain:t})}catch(e){this.logger.error(new oS("Failed removing from cookie jar",e))}}findSimilarCookies(e){try{const t=eS.get();return Object.keys(t).filter((n=>n.indexOf(e)>=0&&null!==t[n])).map((e=>t[e]))}catch(e){return this.logger.error(new oS("Failed fetching from cookie jar",e)),[]}}localStorageIsEnabled(){return null==this.cachedLocalStorageIsEnabled&&(this.cachedLocalStorageIsEnabled=this.checkLocalStorage()),this.cachedLocalStorageIsEnabled}getDataFromLocalStorage(e){if(this.localStorageIsEnabled())try{var t;return null!==(t=window.localStorage.getItem(e))&&void 0!==t?t:void 0}catch(e){this.logger.error(new iS("Failed fetching from local storage",{cause:e}))}}setDataInLocalStorage(e,t){if(this.localStorageIsEnabled())try{window.localStorage.setItem(e,t)}catch(e){this.logger.error(new iS("Failed saving to local storage",{cause:e}))}}removeDataFromLocalStorage(e){if(this.localStorageIsEnabled())try{window.localStorage.removeItem(e)}catch(e){this.logger.error(new iS("Failed removing from local storage",{cause:e}))}}checkLocalStorage(){let e=!1;try{if(window&&window.localStorage){const t=Math.random().toString();window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===t,window.localStorage.removeItem(t)}}catch(e){this.logger.error(new iS("Failed checking local storage",{cause:e}))}return e}}class oS extends db{constructor(e,t){super("CookieJarError",e,{cause:t})}}class iS extends db{constructor(e,t){super("LocalStorageError",e,t)}}class sS{constructor(e){jw(this,"size",void 0),jw(this,"buffer",[]),jw(this,"pointer",0),jw(this,"full",!1),this.size=e}push(e){var t;this.full?this.buffer[this.pointer]=e:(mr(t=this.buffer).call(t,e),this.pointer===this.size-1&&(this.full=!0));this.pointer=(this.pointer+1)%this.size}getLast(e){if(e>=this.size)throw new aS("index out of bounds");const t=(this.pointer+this.size-e)%this.size;return this.buffer[t]}values(){if(!this.full)return this.buffer;const e=[];for(let t=this.pointer;t<this.size;t++)mr(e).call(e,this.buffer[t]);for(let t=0;t<this.pointer;t++)mr(e).call(e,this.buffer[t]);return e}length(){return this.full?this.size:this.pointer}}class aS extends db{constructor(e){super("RingBufferError",e)}}class cS{withContext(e){return new uS(this,e)}static make(e=1e3,t=[]){return new lS(e,t)}}class lS extends cS{constructor(e=1e3,t=[]){super(),jw(this,"eventHandlers",void 0),jw(this,"events",void 0),this.eventHandlers=t,this.events=new sS(e)}debug(e,t){this.pushAndNotify({level:"debug",message:e,context:t,timestamp:new Date})}info(e,t){this.pushAndNotify({level:"info",message:e,context:t,timestamp:new Date})}warn(e,t){this.pushAndNotify({level:"warn",message:e,context:t,timestamp:new Date})}error(e,t){this.pushAndNotify({level:"error",error:e,context:t,timestamp:new Date})}getEvents(){var e;return cm(e=this.events).call(e)}pushAndNotify(e){var t;mr(t=this.events).call(t,e),this.eventHandlers.forEach(function(){var t=Aw((function*(t){try{yield t.handleEvent(e)}catch(e){console.error("Failed to notify event handler",e)}}));return function(e){return t.apply(this,arguments)}}())}}class uS extends cS{constructor(e,t){super(),jw(this,"underlying",void 0),jw(this,"defaultContext",void 0),this.underlying=e,this.defaultContext=t}debug(e,t){this.underlying.debug(e,Tw(Tw({},this.defaultContext),t))}info(e,t){this.underlying.info(e,Tw(Tw({},this.defaultContext),t))}warn(e,t){this.underlying.warn(e,Tw(Tw({},this.defaultContext),t))}error(e,t){this.underlying.error(e,Tw(Tw({},this.defaultContext),t))}getEvents(){return this.underlying.getEvents()}withContext(e){return new uS(this.underlying,Tw(Tw({},this.defaultContext),e))}}const dS={ERROR_REPORTING_SAMPLE_RATE:.1,IDEX_BASE_URL:"https://idx.liadm.com/idex",LC_VERSION:"v3.4.0",LOGGER_HISTORY_SIZE:1e3,PIXEL_BASE_URL:"https://rp.liadm.com",SIDE_CHANNEL_COLLECTOR_URL:"https://rpr.liadm.com",SIDE_CHANNEL_REGISTER_COLLECT_DELAY:1e3,SYNC_BASE_URL:"https://i.liadm.com/s/c"};function pS(){return Gw((e=>"function"==typeof e),"A function is required!")}const fS=nb([eb(),Ww(),Vw(),function e(t){return{kind:"schema",type:"null",reference:e,expects:"null",async:!1,message:t,_run(e,t){return null===e.value?e.typed=!0:Nw(this,"type",e,t),e}}}(),function e(t){return{kind:"schema",type:"undefined",reference:e,expects:"undefined",async:!1,message:t,_run(e,t){return void 0===e.value?e.typed=!0:Nw(this,"type",e,t),e}}}(),Qw(zw((()=>fS))),Kw(eb(),zw((()=>fS))),Yw({toJSON:pS()})]),hS=Kw(eb(),fS),gS=rb("type",[Yw({type:Jw("generated")}),Yw({type:Jw("provided"),source:nb([Jw("cookie"),Jw("local_storage")]),key:eb()})]),vS=Yw({gdprApplies:Zw(Vw()),consentString:eb()}),yS=Yw({consentString:eb()}),mS=Yw({consentString:eb(),applicableSections:Qw(Ww())}),wS=Yw({gdpr:Zw(vS),usPrivacy:Zw(yS),gpp:Zw(mS)}),bS=Gw((e=>"object"==typeof e),"An object is required!"),SS=rb("type",[Yw({type:Jw("application"),appId:Zw(eb()),publisherId:Zw(eb())}),Yw({type:Jw("distributor"),distributorId:eb()}),Yw({type:Jw("custom"),publisherId:Zw(eb()),distributorId:Zw(eb())})]),ES=Yw({name:eb(),version:eb()}),CS=Yw({mode:nb([Jw("full"),Jw("no_path")]),queryParametersFilter:Zw(eb())}),xS=rb("enabled",[Yw({enabled:Jw(!0),contextSelectors:eb(),maxLength:Ww()}),Yw({enabled:Jw(!1)})]),kS=Yw({retries:Ww(),timeout:Ww()}),PS=Yw({enabled:Vw(),delay:ib(Ww(),function e(t,n){return{kind:"validation",type:"min_value",reference:e,async:!1,expects:`>=${t instanceof Date?t.toJSON():$w(t)}`,requirement:t,message:n,_run(e,t){return e.typed&&e.value<this.requirement&&Nw(this,"value",e,t,{received:e.value instanceof Date?e.value.toJSON():$w(e.value)}),e}}}(0))}),RS=Yw({timeout:Ww(),identityPartner:eb()}),OS=rb("type",[Yw({type:Jw("write_to_local_storage"),targetKey:eb()}),Yw({type:Jw("write_to_cookie"),targetKey:eb(),sameSite:Zw(nb([Jw("strict"),Jw("lax"),Jw("none")])),domain:Zw(eb())}),Yw({type:Jw("callback"),callback:pS()})]),IS=Yw({enabled:Vw(),euns:Vw(),pixelTimeout:Zw(Ww())}),_S=Yw({emailCssSelectors:Qw(eb()),queryParameterRegexes:Qw(eb()),windowPropertyPaths:Qw(eb())}),US={empty:{emailCssSelectors:[],queryParameterRegexes:[],windowPropertyPaths:[]},combine:(e,t)=>({emailCssSelectors:e.emailCssSelectors.concat(t.emailCssSelectors),queryParameterRegexes:e.queryParameterRegexes.concat(t.queryParameterRegexes),windowPropertyPaths:e.windowPropertyPaths.concat(t.windowPropertyPaths)})},AS=Yw({eventSourceCssSelector:eb(),eventType:eb()}),LS=Yw({pageEvents:Qw(AS)}),TS={empty:{pageEvents:[]},combine:(e,t)=>({pageEvents:e.pageEvents.concat(t.pageEvents)})},jS={empty:{emailExtractionSettings:US.empty,eventTriggeredCollectionSettings:TS.empty},combine:(e,t)=>({emailExtractionSettings:US.combine(e.emailExtractionSettings,t.emailExtractionSettings),eventTriggeredCollectionSettings:TS.combine(e.eventTriggeredCollectionSettings,t.eventTriggeredCollectionSettings)})};function DS(e){throw new Error(`Pattern not exhaustive. Encountered unknown value ${e}`)}function HS(e){return function(e,t){return new Date((new Date).getTime()+e*t)}(e,864e5)}function FS(e){return dm(ef(e).filter((([e,t])=>null!=t)))}const $S={retries:3,timeout:0},NS=ib(Zw(ob(kS),{}),Bw((e=>Tw(Tw({},$S),FS(e)))),kS),qS={enabled:!0,delay:120},MS=ib(Zw(ob(PS),{}),Bw((e=>Tw(Tw({},qS),FS(e))))),BS={timeout:5e3,identityPartner:"unknown"},QS=ib(Zw(ob(RS),{}),Bw((e=>Tw(Tw({},BS),FS(e))))),VS={enabled:!1,euns:!1,pixelTimeout:500},GS=ib(Zw(ob(IS),{}),Bw((e=>Tw(Tw({},VS),FS(e))))),zS=ib(Qw(eb()),Bw((e=>new Set(e)))),JS=ib(ob(_S),Bw((e=>Tw(Tw({},US.empty),FS(e))))),XS=ib(ob(LS),Bw((e=>Tw(Tw({},TS.empty),FS(e))))),WS=(YS=Yw({emailExtractionSettings:Zw(JS,{}),eventTriggeredCollectionSettings:Zw(XS,{})}),Kw(eb(),Kw(eb(),YS)));var YS;const ZS=Yw({type:Jw("register_client"),clientRef:bS,clientDetails:ES,integration:SS,consent:Zw(wS),partnerCookies:Zw(function e(t,n){return{kind:"schema",type:"set",reference:e,expects:"Set",async:!1,value:t,message:n,_run(e,t){const n=e.value;if(n instanceof Set){e.typed=!0,e.value=new Set;for(const i of n){const s=this.value._run({typed:!1,value:i},t);if(s.issues){const a={type:"set",origin:"value",input:n,key:null,value:i};for(const t of s.issues){var r,o;if(t.path)yp(o=t.path).call(o,a);else t.path=[a];null===(r=e.issues)||void 0===r||mr(r).call(r,t)}if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.add(s.value)}}else Nw(this,"type",e,t);return e}}}(eb()),new Set),idCookieSettings:Zw(gS,{type:"generated"}),urlCollectionSettings:Zw(CS,{mode:"full"}),contextElementCollectionSettings:Zw(xS,{enabled:!1}),collectSettings:NS,autoCollectSettings:MS,resolveSettings:QS,pixelSyncSettings:GS,eventTriggeredCollectionSettings:Zw(XS,{}),emailExtractionSettings:Zw(JS,{}),pageDependentSettings:Zw(WS,{})}),KS=Yw({type:Jw("collect"),clientRef:bS,sourceEvent:hS}),eE=Yw({type:Jw("resolve"),clientRef:bS,requestedAttributes:Zw(zS,[]),additionalResolveParameters:Zw(lb),onFailure:Zw(pS()),onSuccess:Qw(OS)}),tE=rb("level",[Yw({type:Jw("log"),level:Jw("debug"),message:eb(),context:Zw(Xw({}))}),Yw({type:Jw("log"),level:Jw("info"),message:eb(),context:Zw(Xw({}))}),Yw({type:Jw("log"),level:Jw("warn"),message:eb(),context:Zw(Xw({}))}),Yw({type:Jw("log"),level:Jw("error"),name:eb(),message:eb(),cause:Zw(function e(t,n){return{kind:"schema",type:"instance",reference:e,expects:t.name,async:!1,class:t,message:n,_run(e,t){return e.value instanceof this.class?e.typed=!0:Nw(this,"type",e,t),e}}}(Error)),context:Zw(Xw({}))})]),nE=rb("type",[ZS,KS,eE,Yw({type:Jw("debug"),onEvents:Zw(pS()),onHub:Zw(pS())}),tE]);function rE(e){const{pageDetails:t,urlCollectionSettings:n,logger:r}=e;if(null==t.pageUrl)return{isPathRemoved:!1,blockedQueryParams:[]};if("full"===(o=n).mode&&""===o.queryParametersFilter)return{url:t.pageUrl,isPathRemoved:!1,blockedQueryParams:[]};var o;const i=new op(t.pageUrl),s=function(e,t){if("no_path"===t.mode&&"/"!==e.pathname)return e.pathname="",!0;return!1}(i,n),a=function(e,t,n){if(null==t.queryParametersFilter||""===t.queryParametersFilter)return[];try{const n=new RegExp(t.queryParametersFilter),r=new Set;return e.searchParams.forEach(((e,t)=>{n.test(t)&&r.add(t)})),r.forEach((t=>e.searchParams.delete(t))),Array.from(r)}catch(e){return n.error(new oE(e)),[]}}(i,n,r);return{url:i,isPathRemoved:s,blockedQueryParams:a}}class oE extends db{constructor(e){super("FailedToStripQueryParameterError","Failed to strip query parameters",{cause:e})}}for(var iE=[],sE=0;sE<64;)iE[sE]=0|4294967296*Math.sin(++sE%Math.PI);function aE(e){var t,n,r,o=[t=1732584193,n=4023233417,~t,~n],i=[],s=unescape(encodeURI(e))+"",a=s.length;for(e=--a/4+2|15,i[--e]=8*a;~a;)i[a>>2]|=s.charCodeAt(a)<<8*a--;for(sE=s=0;sE<e;sE+=16){for(a=o;s<64;a=[r=a[3],t+((r=a[0]+[t&n|~t&r,r&t|~r&n,t^n^r,n^(t|~r)][a=s>>4]+iE[s]+~~i[sE|15&[s,5*s+1,3*s+5,7*s][a]])<<(a=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*a+s++%4])|r>>>-a),t,n])t=0|a[1],n=a[2];for(s=4;s;)o[--s]+=a[s]}for(e="";s<32;)e+=(o[s>>3]>>4*(1^s++)&15).toString(16);return e}function cE(e){var t,n,r,o,i,s=[],a=[n=1732584193,r=4023233417,~n,~r,3285377520],c=[],l=unescape(encodeURI(e))+"",u=l.length;for(c[e=--u/4+2|15]=8*u;~u;)c[u>>2]|=l.charCodeAt(u)<<8*~u--;for(t=u=0;t<e;t+=16){for(n=a;u<80;n=[n[4]+(s[u]=u<16?~~c[t+u]:2*l|l<0)+1518500249+[r&o|~r&i,l=341275144+(r^o^i),882459459+(r&o|r&i|o&i),l+1535694389][u++/5>>2]+((l=n[0])<<5|l>>>27),l,r<<30|r>>>2,o,i])l=s[u-3]^s[u-8]^s[u-14]^s[u-16],r=n[1],o=n[2],i=n[3];for(u=5;u;)a[--u]+=n[u]}for(l="";u<40;)l+=(a[u>>3]>>4*(7-u++)&15).toString(16);return l}for(var lE,uE=18,dE=[],pE=[];uE>1;uE--)for(lE=uE;lE<320;)dE[lE+=uE]=1;function fE(e,t){return 4294967296*Math.pow(e,1/t)|0}for(lE=0;lE<64;)dE[++uE]||(pE[lE]=fE(uE,2),dE[lE++]=fE(uE,3));function hE(e,t){return e>>>t|e<<-t}function gE(e){var t=pE.slice(uE=lE=0,8),n=[],r=unescape(encodeURI(e))+"",o=r.length;for(n[e=--o/4+2|15]=8*o;~o;)n[o>>2]|=r.charCodeAt(o)<<8*~o--;for(o=[];uE<e;uE+=16){for(fE=t.slice();lE<64;yp(fE).call(fE,r+(hE(r=fE[0],2)^hE(r,13)^hE(r,22))+(r&fE[1]^fE[1]&fE[2]^fE[2]&r)))fE[3]+=r=0|(o[lE]=lE<16?~~n[lE+uE]:(hE(r=o[lE-2],17)^hE(r,19)^r>>>10)+o[lE-7]+(hE(r=o[lE-15],7)^hE(r,18)^r>>>3)+o[lE-16])+fE.pop()+(hE(r=fE[4],6)^hE(r,11)^hE(r,25))+(r&fE[5]^~r&fE[6])+dE[lE++];for(lE=8;lE;)t[--lE]+=fE[lE]}for(r="";lE<64;)r+=(t[lE>>3]>>4*(7-lE++)&15).toString(16);return r}const vE="[\\s'\"]",yE="*********";function mE(e){return`(?:${function(e){return`(?:${e?`^${vE}*`:"\\b"}([A-Z0-9._%+\\-]+@[A-Z0-9.\\-]+\\.[A-Z]{2,})${e?`${vE}*$`:"\\b"})`}(e)}|${function(e){return`(?:${e?`^${vE}*`:"\\b"}((?:[A-Z0-9._\\-]|%25|%2B)+%40[A-Z0-9.\\-]+\\.[A-Z]{2,})${e?`${vE}*$`:"\\b"})`}(e)})`}function wE(e){return`(?:${function(e){return`(?:${e?`^${vE}*`:"\\b"}([A-F0-9]{32,64})${e?`${vE}*$`:"\\b"})`}(e)}|${mE(e)})`}const bE=new RegExp(mE(!1),"gi"),SE=new RegExp(wE(!0),"i"),EE=new RegExp(wE(!1),"gi"),CE=new Map([[32,"md5"],[40,"sha1"],[64,"sha256"]]);function xE(e,t,n,r){return e.substring(0,t)+r+e.substring(n)}function kE(e){try{const t=[];let n=e,r=bE.exec(e),o=0;for(;r;){let i;i=r[1]?PE(r[1]):PE(decodeURIComponent(r[2])),mr(t).call(t,i),n=xE(n,o+r.index,o+r.index+r[0].length,i.md5),o+=i.md5.length-r[0].length,r=bE.exec(e)}return{stringWithoutRawEmails:n,hashesFromOriginalString:t}}finally{bE.lastIndex=0}}function PE(e){const t=e.toLowerCase();return{md5:aE(t),sha1:cE(t),sha256:gE(t)}}function RE(e,t){return"string"==typeof t?t.replace(bE,yE):t}function OE(e){if(null!=e[1]){const n=(t=e[1],CE.get(t.length));if(null!=n)return{type:"hashed",value:{type:n,value:e[1]}}}else{if(null!=e[2])return{type:"raw",value:e[2]};if(null!=e[3])return{type:"raw",value:decodeURIComponent(e[3])}}var t}function IE(e){const t=SE.exec(e);if(t)return OE(t)}function _E(e){const{contextElementCollectionSettings:t}=e;if(!t.enabled)return{};const{contextSelectors:n,maxLength:r}=t;if(""===n||r<=0)return{};const o=function(e,t){const n=window.document.querySelectorAll(e);let r="";return n.forEach((e=>{const n=kE(e.outerHTML).stringWithoutRawEmails,o=r+n;if(i=o,Math.ceil(4*new Blob([i]).size/3)>t)return o;var i;r=o})),r}(n,r);return{collectedElements:o}}const UE="lidids.",AE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,LE=(e,t,n)=>n.indexOf(e)===t;function TE(e){return"string"==typeof e&&AE.test(e)}class jE extends db{constructor(e,t){super("LoadAndStoreDecisionsError",e,{cause:t})}}class DE extends db{constructor(e,t){super("GetExternalIdCookieError",e,{cause:t})}}function HE(e){const{storageHandler:t,partnerCookiesToResolve:n,logger:r}=e;try{return function(e,t){const n=[],r=[];return e.forEach((e=>{const o=t.getCookie(e)||t.getDataFromLocalStorage(e);if(o){const{stringWithoutRawEmails:t,hashesFromOriginalString:i}=kE(o);mr(n).call(n,{name:e,value:t}),mr(r).call(r,...i)}})),{retrieved:n,extractedHashes:FE(r)}}(function(e){const t=[];return e.forEach((e=>mr(t).call(t,Im(e).call(e)))),t}(n),t)}catch(e){return r.error(new $E("Error while enriching identifiers",{cause:e})),{retrieved:[],extractedHashes:[]}}}function FE(e){const t=new Set,n=[];return e.forEach((e=>{t.has(e.md5)||(mr(n).call(n,e),t.add(e.md5))})),n}class $E extends db{constructor(e,t){super("ResolvePartnerCookiesError",e,{cause:t})}}const NE="0123456789ABCDEFGHJKMNPQRSTVWXYZ",qE=NE.length,ME=Math.pow(2,48)-1,BE=10,QE=16,VE=function(){const e="undefined"!=typeof window?window:null,t=e&&(e.crypto||e.msCrypto);if(t)return()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]/255};return()=>Math.random()}();function GE(){let e=Math.floor(VE()*qE);return e===qE&&(e=qE-1),NE.charAt(e)}function zE(){return function(e,t){if(e>ME)throw new JE("cannot encode time greater than "+ME);let n,r="";for(;t>0;t--)n=e%qE,r=NE.charAt(n)+r,e=(e-n)/qE;return r}(Mp(),BE)+function(e){let t="";for(;e>0;e--)t=GE()+t;return t}(QE)}class JE extends db{constructor(e){super("UlidError",e)}}const XE="_lc2_fpi",WE="_li_duid";function YE(e){const{storageHandler:t,domainDetails:n,logger:r}=e,o=n.cookieDomain,i=function(e,t,n){let r;try{r=e.getCookie(XE)}catch(e){n.error(new ZE("Error while loading old FPC from cookie",e))}if(null==r)try{r=e.getDataFromLocalStorage(WE)}catch(e){n.error(new ZE("Error while loading old FPC from local storage",e))}return null!=r?r:function(e){const t=`${function(e,t=12){return cE(e.replace(/^\./,"")).substring(0,t)}(e)}--${zE()}`;return t.toLocaleLowerCase()}(t)}(t,o,r);try{null==t.getCookie(XE)&&t.setCookie(XE,i,{domain:o,expires:HS(730)})}catch(e){r.error(new ZE("Couldn't store FPC in cookie",e))}try{t.setDataInLocalStorage(WE,i)}catch(e){r.error(new ZE("Couldn't store FPC in local storage",e))}return i}class ZE extends db{constructor(e,t){super("GenerateAndStoreLiveConnectIdsError",e,{cause:t})}}const KE=["email","emailhash","hash","hashedemail"];function eC(e){const{sourceEvent:t}=e,n=[];for(const e in t)if(Fp(KE).call(KE,e.toLowerCase())&&0===n.length){const r=t[e];if("string"==typeof r){const e=IE(r);switch(null==e?void 0:e.type){case"raw":{const t=PE(e.value);mr(n).call(n,{type:"md5",value:t.md5},{type:"sha1",value:t.sha1},{type:"sha256",value:t.sha256});break}case"hashed":mr(n).call(n,e.value)}}}function r(e){const n=t[e];if("string"==typeof n)return n}return{hashedEmails:n,ipv4:r("ipv4"),ipv6:r("ipv6"),userAgent:r("userAgent")}}const tC=["items","itemids"];class nC{constructor(e){jw(this,"value",void 0),this.value=e}}class rC extends db{constructor(e,t){super("InvalidSourceEventPageUrlError",e,{cause:t})}}class oC{constructor(e){jw(this,"apply",void 0),this.apply=e}map(e){return new oC((t=>e(this.apply(t))))}defaultOnEmpty(e){return new oC((t=>{const n=t.getBodyAsText();return""===n?e:this.apply({getBodyAsText:()=>n})}))}}!function(e){e.ignore=new e((()=>{})),e.constant=function(t){return new e((()=>t))},e.text=new e((e=>e.getBodyAsText())),e.parseJson=function(t){return new e((e=>{const n=e.getBodyAsText();let r;try{r=kw(n)}catch(e){throw new iC(e)}const o=sb(t,r);if(o.success)return o.output;throw new sC(`Failed parsing response: ${JSON.stringify(r)}`)}))},e.fail=new e((()=>{throw new aC}))}(oC||(oC={}));class iC extends db{constructor(e){super("JsonParsingError","Failed parsing response to json",{cause:e})}}class sC extends db{constructor(e){super("ResponseParsingError",`Failed parsing response: ${e}`)}}class aC extends db{constructor(){super("UnexpectedResponseError","Unexpected response")}}const cC="idCookie";function lC(){return lC=Aw((function*(e){const{callHandler:t,liveConnectFpc:n,resolveSettings:r,identityPool:o,idCookieSettings:i}=e,s=function(e){var t,n,r,o,i;const{liveConnectFpc:s,pageDetails:a,domainDetails:c,consent:l,integration:u,requestedAttributes:d,identityPool:p,pageViewId:f}=e,h=ub.empty();let g;null!=(null===(t=l.gdpr)||void 0===t?void 0:t.gdprApplies)&&(g=l.gdpr.gdprApplies?"1":"0");h.addOptional("duid",s);let v="any";switch(u.type){case"application":u.publisherId&&(v=u.publisherId);break;case"distributor":h.add("did",u.distributorId);break;case"custom":u.publisherId&&(v=u.publisherId),h.addOptional("did",u.distributorId);break;default:DS(u)}h.addOptional("cd",c.cookieDomain).addOptional("pu",a.pageUrl?function(e){const t=new op(e.toString());return t.pathname="",t.search="",t}(a.pageUrl).toString():void 0).addOptional("gdpr",g).addOptional("gdpr_consent",null===(n=l.gdpr)||void 0===n?void 0:n.consentString).addOptional("us_privacy",null===(r=l.usPrivacy)||void 0===r?void 0:r.consentString).addOptional("gpp_s",null===(o=l.gpp)||void 0===o?void 0:o.consentString).addOptional("gpp_as",null===(i=l.gpp)||void 0===i||null===(i=i.applicableSections)||void 0===i?void 0:i.join(",")).addExternalIdCookies(p.getExternalIdCookies()).addOptional("pv",f),y=h,m=p.getProvidedEmailHashes(),void m.forEach((e=>{switch(e.type){case"md5":y.addOptional("m",e.value);break;case"sha1":y.addOptional("sh1",e.value);break;case"sha256":y.addOptional("sh2",e.value)}})),d.forEach((e=>{h.add("resolve",e)})),p.getRetrievedIdentifiers().forEach((e=>{h.add(e.name,e.value)})),h.addOptional("pip",e.identityPool.getIpv4(),{base64UrlEncode:!0}).addOptional("pip6",e.identityPool.getIpv6(),{base64UrlEncode:!0}),e.additionalResolveParameters&&h.addParamsMap(e.additionalResolveParameters);var y,m;return{base:`${e.idexEndpointUrl}/${encodeURIComponent(e.resolveSettings.identityPartner)}/${encodeURIComponent(v)}`,query:h}}(e),a=yield function(e){const{callHandler:t,resolutionUrl:n,resolveSettings:r}=e,o=`${n.base}${n.query.build()}`;return t.ajaxGet({url:o,responseHandler:uC,timeout:r.timeout})}({callHandler:t,resolutionUrl:s,resolveSettings:r,identityPool:o}),c=s.query.valuesFor("resolve"),l=Tw({},a.data);if(Fp(c).call(c,cC))if("provided"===i.type){const e=o.getExternalIdCookie(i.source,i.key);null!=e&&(l[cC]=e)}else"generated"===i.type&&(l[cC]=n);return Tw(Tw({},a),{},{data:l})})),lC.apply(this,arguments)}const uC=oC.parseJson(Kw(eb(),eb())).defaultOnEmpty({});const dC=Yw({bakers:Zw(Qw(eb()))}),pC=oC.parseJson(dC);function fC(){return fC=Aw((function*(e){const{pixelUrls:t,callHandler:n,timestamp:r,collectSettings:o,logger:i,pixelBaseUrl:s,identityPool:a}=e,{retries:c,timeout:l}=o,u={"X-LI-Provided-User-Agent":a.getUserAgent()};for(let e=0;e<c+1;e++)try{const e=yield n.ajaxGet({url:t.makeJUrl(s),responseHandler:pC,headers:u,timeout:l});return void(yield gC({callHandler:n,response:e.data,timestamp:r,logger:i}))}catch(e){if(i.error(new yC("Failed to send pixel",e)),fb(e))return void i.info("Pixel call blocked by consent, not retrying")}i.error(new mC(`Failed to send pixel after all ${c} retries`),{pixelUrls:t,collectSettings:o}),yield function(e){return hC.apply(this,arguments)}(e)})),fC.apply(this,arguments)}function hC(){return(hC=Aw((function*(e){const{callHandler:t,pixelUrls:n,pixelBaseUrl:r}=e;try{yield t.pixelGet(n.makePUrl(r))}catch(e){}}))).apply(this,arguments)}function gC(e){return vC.apply(this,arguments)}function vC(){return(vC=Aw((function*(e){var t;const{callHandler:n,response:r,timestamp:o,logger:i}=e,s=null!==(t=r.bakers)&&void 0!==t?t:[];for(const e of s)try{i.info(`Calling baker ${e}`),yield n.pixelGet(`${e}?dtstmp=${o.getTime()}`)}catch(e){}}))).apply(this,arguments)}class yC extends db{constructor(e,t){super("SendPixelError",e,{cause:t})}}class mC extends db{constructor(e){super("SendPixelRetriesExhaustedError",e)}}const wC={_li_ss:{type:"local_storage"}};function bC(e){const{storageHandler:t,logger:n,syncContainerEndpointUrl:r}=e;try{const i=function(e,t){try{return e.getDataFromLocalStorage("_li_ss")}catch(e){t.error(new SC("Error while loading sync state",{cause:e}))}}(t,n)||"",s=function(e){var t,n,r;const{appId:o,consent:i,domainDetails:s,liveConnectFpc:a,syncState:c,pixelSyncSettings:l,syncContainerEndpointUrl:u,hubVersion:d,identityPool:p}=e,f={stripEmpty:!1},h=ub.empty().addOptional("duid",a,f).add("euns",l.euns?1:0,f).addOptional("pt",l.pixelTimeout,f).addOptional("s",c,f).addOptional("us_privacy",null===(t=i.usPrivacy)||void 0===t?void 0:t.consentString,f).addOptional("gpp_s",null===(n=i.gpp)||void 0===n?void 0:n.consentString,f).addOptional("gpp_as",null===(r=i.gpp)||void 0===r||null===(r=r.applicableSections)||void 0===r?void 0:r.join(","),f).addOptional("version",d,f).addOptional("cd",s.cookieDomain,f).addExternalIdCookies(p.getExternalIdCookies()).add("pv",e.pageViewId),g=`${u}/${o}${h.build()}`;return g}(Tw(Tw({},e),{},{syncState:i})),a=document.createElement("iframe");if(!a||!document.body)return void n.error(new SC("Failed to create iframe for sync container"));if(a.style.display="none",a.style.width="0px",a.style.height="0px",a.style.border="0px","postMessage"in window){const e=new op(r).origin,i=r=>{r.origin===e&&r.data&&"string"==typeof r.data&&function(e,t,n){try{t&&t.replace(/([^=]+)=([^&]*)&?/g,((t,n,r)=>{if(n=decodeURIComponent(n),r=decodeURIComponent(r),n in wC){const t=wC[n];switch(t.type){case"cookie":{const o=t.ttlMillis?new Date(Mp()+t.ttlMillis):void 0;e.setCookie(n,r,{expires:o,domain:t.domain});break}case"local_storage":e.setDataInLocalStorage(n,r);break;default:DS(t)}}return""}))}catch(e){n.error(new SC("Error while handling SC message",{cause:e}))}}(t,r.data,n)};o=i,window.addEventListener?window.addEventListener("message",o,!1):window.attachEvent("onmessage",o)}a.src=s,document.body.appendChild(a)}catch(e){n.error(new SC("Error while launching sync container",{cause:e}))}var o}class SC extends db{constructor(e,t){super("SyncContainerError",e,{cause:t})}}function EC(e){const{cssSelectors:t,logger:n}=e,r=[];if(0===t.length)return r;try{const e=t.join(", ");document.querySelectorAll(e).forEach((e=>{if(e instanceof HTMLInputElement){const t=IE(e.value);t&&mr(r).call(r,t)}else{const t=function(e){const t=[];try{let n=EE.exec(e);for(;null!=n;){const r=OE(n);r&&mr(t).call(t,r),n=EE.exec(e)}return t}finally{EE.lastIndex=0}}(e.outerHTML);mr(r).call(r,...t)}}))}catch(e){n.error(new CC(`Failed to collect emails from css selectors ${t}`,e))}return r}class CC extends db{constructor(e,t){super("CollectEmailsFromCssSelectorError",e,{cause:t})}}class xC extends db{constructor(e,t){super("CollectEmailsFromQueryParamsError",e,{cause:t})}}class kC extends db{constructor(e,t){super("CollectEmailsFromWindowPropertyError",e,{cause:t})}}class PC{constructor(e){jw(this,"props",void 0);const{logger:t,consent:n,storageHandler:r,callHandler:o,clientDetails:i,integration:s,idCookieSettings:a,urlCollectionSettings:c,partnerCookiesToResolve:l,contextElementCollectionSettings:u,collectSettings:d,autoCollectSettings:p,resolveSettings:f,pixelSyncSettings:h,hubConfig:g,emailExtractionSettings:v,eventTriggeredCollectionSettings:y,sharedData:m,identityPool:w}=e,{pageDetails:b,domainDetails:S}=m,E=HE({storageHandler:r,partnerCookiesToResolve:l,logger:t});w.addPartnerCookies(E);const C=rE({pageDetails:b,urlCollectionSettings:c,logger:t}),x=_E({contextElementCollectionSettings:u}),k=function(e){const{storageHandler:t,idCookieSettings:n,logger:r}=e;switch(n.type){case"generated":return;case"provided":try{const{source:e,key:o}=n;switch(e){case"cookie":{const e=t.getCookie(o);return null==e?void r.error(new DE("Cookie doesn't exist")):{source:"cookie",name:o,value:e}}case"local_storage":{const e=t.getDataFromLocalStorage(o);return null==e?void r.error(new DE("Local storage item doesn't exist")):{source:"local_storage",name:o,value:e}}default:DS(e)}}catch(e){r.error(new DE("Failed fetching provided id cookie",e))}}}({storageHandler:r,idCookieSettings:a,logger:t});null!=k&&w.addExternalIdCookie(k);const P=YE({domainDetails:S,storageHandler:r,logger:t}),R=function(e){var t;const{pageDetails:n,domainDetails:r,storageHandler:o,logger:i}=e,s=((null===(t=n.pageUrl)||void 0===t?void 0:t.searchParams.getAll("li_did"))||[]).map((e=>Im(e).call(e))).filter((e=>e.length>0&&TE(e))).filter(LE);let a;try{a=o.findSimilarCookies(UE)}catch(e){i.error(new jE("Error while searching for decisions in cookies",e)),a=[]}const c=a.map((e=>Im(e).call(e))).filter((e=>e.length>0&&TE(e)));return s.forEach((e=>{try{o.setCookie(`${UE}${e}`,e,{expires:HS(30),sameSite:"lax",domain:r.cookieDomain})}catch(e){i.error(new jE("Error while storing decision in cookie",e))}})),{decisionIds:s.concat(c).filter(LE)}}({pageDetails:b,domainDetails:S,storageHandler:r,logger:t});let O=[];null!=b.pageUrl&&(O=function({pageUrl:e,queryParamRegexes:t,logger:n}){const r=[];if(0===t.length)return r;try{const n=e.searchParams,o=new RegExp(t.join("|"),"i");n.forEach(((e,t)=>{if(o.test(t)){const t=IE(e);t&&mr(r).call(r,t)}}))}catch(e){n.error(new xC("Failed to collect emails from query params",e))}return r}({pageUrl:b.pageUrl,queryParamRegexes:v.queryParameterRegexes,logger:t})),this.props={logger:t,hubConfig:g,callHandler:o,storageHandler:r,consent:n,pageDetails:b,domainDetails:S,liveConnectFpc:P,decisions:R,collectedUrl:C,contextElements:x,clientDetails:i,integration:s,urlCollectionSettings:c,collectSettings:d,autoCollectSettings:p,resolveSettings:f,pixelSyncSettings:h,emailExtractionSettings:v,emailsFromQueryParams:O,eventTriggeredCollectionSettings:y,identityPool:w,idCookieSettings:a,pageViewId:m.pageViewId}}resolve(e){var t=this;return Aw((function*(){var n;const{requestedAttributes:r,additionalResolveParameters:o,onSuccess:i,onFailure:s}=e,{logger:a,consent:c,callHandler:l,liveConnectFpc:u,pageDetails:d,domainDetails:p,resolveSettings:f,integration:h,hubConfig:g,storageHandler:v,identityPool:y,idCookieSettings:m,pageViewId:w}=t.props;try{const e=yield function(e){return lC.apply(this,arguments)}({consent:c,liveConnectFpc:u,pageDetails:d,domainDetails:p,callHandler:l,resolveSettings:f,integration:h,requestedAttributes:r,additionalResolveParameters:o,idexEndpointUrl:g.idexEndpointUrl,identityPool:y,idCookieSettings:m,pageViewId:w});for(const t of i)try{switch(t.type){case"write_to_local_storage":v.setDataInLocalStorage(t.targetKey,JSON.stringify(e.data));break;case"write_to_cookie":v.setCookie(t.targetKey,JSON.stringify(e.data),{expires:null!==(n=e.expiresAt)&&void 0!==n?n:HS(730),sameSite:t.sameSite,domain:t.domain});break;case"callback":t.callback(e.data);break;default:DS(t)}}catch(e){a.error(new RC("Failed to handle onResolveSuccess action",e))}}catch(e){if(a.error(new RC("Failed to resolve identity",e)),s)try{s(e)}catch(e){a.error(new RC("Failed to call onFailure callback",e))}}}))()}collect(e){var t=this;return Aw((function*(){const{callHandler:n,pageDetails:r,collectedUrl:o,urlCollectionSettings:i,contextElements:s,integration:a,clientDetails:c,collectSettings:l,liveConnectFpc:u,decisions:d,consent:p,domainDetails:f,logger:h,hubConfig:g,identityPool:v,pageViewId:y}=t.props;try{const t=new Date,m=function(e){const{pageDetails:t,sourceEvent:n,logger:r}=e;if("pageUrl"in n&&"string"==typeof n.pageUrl)try{return{pageUrl:new op(n.pageUrl),referrer:t.referrer}}catch(e){r.error(new rC("Cannot create pageUrl with invalid source",e))}}({pageDetails:r,sourceEvent:e,logger:h});let w=o,b=r;null!=m&&(w=rE({pageDetails:m,urlCollectionSettings:i,logger:h}),b=m),v.addSourceEventEmails(eC({sourceEvent:e})),v.addIpv4(eC({sourceEvent:e})),v.addIpv6(eC({sourceEvent:e})),v.addUserAgent(eC({sourceEvent:e}));const S=function(e){const{sourceEvent:t}=e,n=Tw({},t);for(const e in t)if(Fp(tC).call(tC,e.toLowerCase())){const r=t[e];Array.isArray(r)&&r.length>10&&(n[e]=r.slice(0,10))}return new nC(n)}({sourceEvent:e}),E=function(e){var t,n,r,o,i;const s=ub.empty().add("dtstmp",e.timestamp.getTime());switch(e.integration.type){case"application":s.addOptional("aid",e.integration.appId);break;case"distributor":s.add("did",e.integration.distributorId);break;case"custom":s.addOptional("did",e.integration.distributorId);break;default:DS(e.integration)}let a;s.add("se",JSON.stringify(e.limitedSourceEvent.value,RE),{base64UrlEncode:!0}).addOptional("duid",e.liveConnectFpc).add("tv",e.hubVersion).addOptional("pu",e.collectedUrl.url?e.collectedUrl.url.toString():void 0).addOptional("pu_rp",e.collectedUrl.isPathRemoved?"1":void 0).add("pu_bqp",e.collectedUrl.blockedQueryParams.join(",")),e.identityPool.getRetrievedIdentifiers().forEach((e=>{s.add(`ext_${e.name}`,e.value)})),e.identityPool.getExtractedHashes().forEach((e=>{s.add("scre",`${e.md5},${e.sha1},${e.sha256}`)})),null!=(null===(t=e.consent.gdpr)||void 0===t?void 0:t.gdprApplies)&&(a=e.consent.gdpr.gdprApplies?"1":"0"),s.add("li_did",e.decisions.decisionIds.join(",")).addOptional("e",e.identityPool.getProvidedEmailHashes().map((e=>e.value)).join(",")).addOptional("us_privacy",null===(n=e.consent.usPrivacy)||void 0===n?void 0:n.consentString).add("wpn",e.clientDetails.name).add("wpv",e.clientDetails.version).addOptional("gdpr",a).addOptional("gdpr_consent",null===(r=e.consent.gdpr)||void 0===r?void 0:r.consentString).addOptional("refr",e.pageDetails.referrer).addOptional("gpp_s",null===(o=e.consent.gpp)||void 0===o?void 0:o.consentString).addOptional("gpp_as",null===(i=e.consent.gpp)||void 0===i?void 0:i.applicableSections.join(",")).addOptional("cd",e.domainDetails.cookieDomain).addExternalIdCookies(e.identityPool.getExternalIdCookies()).addOptional("c",e.contextElements.collectedElements,{base64UrlEncode:!0}).add("pv",e.pageViewId).addOptional("pip",e.identityPool.getIpv4(),{base64UrlEncode:!0}).addOptional("pip6",e.identityPool.getIpv6(),{base64UrlEncode:!0});const c=s.build();return{makeJUrl:e=>`${e}/j${c}`,makePUrl:e=>`${e}/p${c}`}}({integration:a,timestamp:t,limitedSourceEvent:S,contextElements:s,clientDetails:c,liveConnectFpc:u,decisions:d,domainDetails:f,consent:p,collectedUrl:w,pageDetails:b,hubVersion:g.hubVersion,identityPool:v,pageViewId:y});yield function(e){return fC.apply(this,arguments)}({pixelBaseUrl:g.pixelBaseUrl,pixelUrls:E,callHandler:n,collectSettings:l,timestamp:t,logger:h,identityPool:v})}catch(e){h.error(new OC(e))}}))()}tryCollectToSideChannel(){var e=this;return Aw((function*(){const{logger:t,emailExtractionSettings:n,emailsFromQueryParams:r,liveConnectFpc:o,pageDetails:i,integration:s}=e.props;try{const a=EC({cssSelectors:n.emailCssSelectors,logger:t}),c=function(e){const{logger:t,propertyPaths:n}=e,r=[];return n.forEach((e=>{try{const t=e.split(".");let n=window;for(const e of t)n=n[e];if("string"==typeof n){const e=IE(n);e&&mr(r).call(r,e)}}catch(n){t.error(new kC(`Failed to collect emails from window property ${e}`,n))}})),r}({propertyPaths:n.windowPropertyPaths,logger:t});if(0===a.length&&0===c.length&&0===r.length)return void t.debug("No emails to collect to side channel, skipping");let l;switch(s.type){case"application":l=s.appId;break;case"distributor":case"custom":l=s.distributorId;break;default:DS(s)}const u={fpc:o,page_url:i.pageUrl,customer_id:l,window_properties:c,css_selectors:a,query_parameters:r,timestamp:(new Date).toISOString()},d=ab(JSON.stringify(u)),p=`${e.props.hubConfig.sideChannelCollectorUrl}?${d}`;t.info("Sending data to side channel",{eventToSend:u}),yield e.props.callHandler.pixelGet(p)}catch(e){t.error(new IC(e))}}))()}tryPixelSync(){var e=this;return Aw((function*(){const{callHandler:t,consent:n,domainDetails:r,liveConnectFpc:o,storageHandler:i,integration:s,hubConfig:a,logger:c,pixelSyncSettings:l,identityPool:u,pageViewId:d}=e.props;l.enabled&&"application"===s.type&&null!=s.appId&&bC({appId:s.appId,callHandler:t,consent:n,domainDetails:r,liveConnectFpc:o,storageHandler:i,pixelSyncSettings:l,syncContainerEndpointUrl:a.syncContainerEndpointUrl,hubVersion:a.hubVersion,logger:c,identityPool:u,pageViewId:d})}))()}runStartupTasks(e,t){var n=this;return Aw((function*(){yield n.tryPixelSync(),n.props.eventTriggeredCollectionSettings.pageEvents.length>0&&e.scheduleOnPageEvents(n.props.eventTriggeredCollectionSettings.pageEvents,{type:"collect_to_side_channel",clientRef:t}),(n.props.emailExtractionSettings.queryParameterRegexes.length>0||n.props.emailExtractionSettings.emailCssSelectors.length>0||n.props.emailExtractionSettings.windowPropertyPaths.length>0)&&e.scheduleAfterDelay(n.props.hubConfig.sideChannelRegisterCollectDelay,{type:"collect_to_side_channel",clientRef:t}),n.props.autoCollectSettings.enabled&&e.scheduleAfterDelay(n.props.autoCollectSettings.delay,{type:"attempt_auto_collect",clientRef:t})}))()}}class RC extends db{constructor(e,t){super("ResolveIdentityError",e,{cause:t})}}class OC extends db{constructor(e){super("CollectError","Failed to collect",{cause:e})}}class IC extends db{constructor(e){super("CollectToSideChannelError","Failed to collect to side channel",{cause:e})}}function _C(e){const{settings:t,monoid:n,pageDetails:r,logger:o}=e;let i=n.empty;try{const e=function(e){return ef(e).map((([e,t])=>[new RegExp(e),ef(t).map((([e,t])=>[new RegExp(e),t]))]))}(t),[o,s]=function(e){if(null==e.pageUrl)return["",""];return[e.pageUrl.hostname,e.pageUrl.pathname]}(r);e.filter((([e])=>e.test(o))).forEach((([,e])=>{e.filter((([e])=>e.test(s))).forEach((([,e])=>{i=n.combine(i,e)}))}))}catch(e){o.error(new UC("Failed to evaluate page settings",e))}return i}class UC extends db{constructor(e,t){super("EvalPageSettingsError",e,{cause:t})}}function AC(e,t){let n=!1;try{t.forEach((e=>{e.eventBus.once("pre_lips",(()=>{n=!0}))}))}catch(t){e.error(new TC("Error while checking if collect has been called globally",t))}return n}class LC{constructor(){jw(this,"config",{}),jw(this,"eventBus",{once:(e,t)=>{"pre_lips"===e&&t()}})}}class TC extends db{constructor(e,t){super("LiQInstancesError",e,{cause:t})}}class jC{constructor(){jw(this,"idCookies",new Map),jw(this,"retrievedIdentifiersFromPartnerCookies",new Map),jw(this,"extractedHashesFromPartnerCookies",new Map),jw(this,"providedEmailHashes",[]),jw(this,"ipv4",void 0),jw(this,"ipv6",void 0),jw(this,"userAgent",void 0)}addExternalIdCookie(e){let t=this.idCookies.get(e.source);return null==t&&(t=new Map,this.idCookies.set(e.source,t)),t.set(e.name,e.value),this}getExternalIdCookie(e,t){var n;return null===(n=this.idCookies.get(e))||void 0===n?void 0:n.get(t)}getExternalIdCookies(){const e=[];return this.idCookies.forEach(((t,n)=>{t.forEach(((t,r)=>{mr(e).call(e,{source:n,name:r,value:t})}))})),e}addPartnerCookies(e){return e.retrieved.forEach((e=>{this.retrievedIdentifiersFromPartnerCookies.set(e.name,e.value)})),e.extractedHashes.forEach((e=>{this.extractedHashesFromPartnerCookies.set(e.md5,e)})),this}getRetrievedIdentifiers(){return Array.from(this.retrievedIdentifiersFromPartnerCookies,(([e,t])=>({name:e,value:t})))}getExtractedHashes(){return Array.from(this.extractedHashesFromPartnerCookies,(([e,t])=>t))}addSourceEventEmails(e){return e.hashedEmails.forEach((e=>{var t;mr(t=this.providedEmailHashes).call(t,e)})),this}getProvidedEmailHashes(){return this.providedEmailHashes}addIpv4(e){return this.ipv4=e.ipv4,this}getIpv4(){return this.ipv4}addIpv6(e){return this.ipv6=e.ipv6,this}getIpv6(){return this.ipv6}addUserAgent(e){return this.userAgent=e.userAgent,this}getUserAgent(){return this.userAgent}}const DC="_li_dcdm_c";function HC(e,t){const n=document.domain||document.location&&document.location.host||window&&window.location&&window.location.host||"localhost",r=n.split(".");for(let n=r.length;n>0;n--){const o=`.${r.slice(n-1,r.length).join(".")}`;if(FC(o,e,t),$C(e,t)===o)return o}return function(e,t,n){try{t.deleteCookie(DC,e)}catch(e){n.warn("Failed to delete TLD cache",{error:e})}}(n,e,t),`.${n}`}function FC(e,t,n){try{t.setCookie(DC,e,{sameSite:"lax",domain:e})}catch(e){n.warn("Failed to set TLD cache",{error:e})}}function $C(e,t){try{return e.getCookie(DC)}catch(e){t.warn("Failed to get TLD cache",{error:e})}}let NC;const qC=new Uint8Array(16);function MC(){if(!NC&&(NC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!NC))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return NC(qC)}const BC=[];for(let e=0;e<256;++e)mr(BC).call(BC,(e+256).toString(16).slice(1));var QC={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function VC(e,t,n){if(QC.randomUUID&&!t&&!e)return QC.randomUUID();const r=(e=e||{}).random||(e.rng||MC)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return BC[e[t+0]]+BC[e[t+1]]+BC[e[t+2]]+BC[e[t+3]]+"-"+BC[e[t+4]]+BC[e[t+5]]+"-"+BC[e[t+6]]+BC[e[t+7]]+"-"+BC[e[t+8]]+BC[e[t+9]]+"-"+BC[e[t+10]]+BC[e[t+11]]+BC[e[t+12]]+BC[e[t+13]]+BC[e[t+14]]+BC[e[t+15]]}(r)}class GC{constructor(e,t,n,r,o,i,s,a){jw(this,"storageHandlerFactory",void 0),jw(this,"callHandlerFactory",void 0),jw(this,"consentManager",void 0),jw(this,"logger",void 0),jw(this,"hubConfig",void 0),jw(this,"commandQueue",void 0),jw(this,"scheduler",void 0),jw(this,"sharedData",void 0),jw(this,"clientHandlers",new Map),jw(this,"sharedIdentityPool",new jC),this.storageHandlerFactory=e,this.callHandlerFactory=t,this.consentManager=n,this.logger=r,this.hubConfig=o,this.commandQueue=i,this.scheduler=s,this.sharedData=a}static makeAsync(e,t,n,r,o,i,s){return Aw((function*(){const a=e.unrestricted(r),c=Dw(),l=function(e){const{storageHandler:t,logger:n}=e;return{cookieDomain:HC(t,n)}}({logger:r,storageHandler:a}),u=VC();return new GC(e,t,n,r,o,i,s,{pageDetails:c,domainDetails:l,pageViewId:u})}))()}processCommand(e){switch(this.logger.info(`hub received command of type ${e.type}`,{command:e}),e.type){case"register_client":return this.processRegisterClientCommand(e);case"collect":return this.processCollectCommand(e);case"resolve":return this.processResolveCommand(e);case"log":return this.processLogCommand(e);case"debug":return this.processDebugCommand(e);case"collect_to_side_channel":return this.processCollectToSideChannelCommand(e);case"attempt_auto_collect":return this.processAttemptAutoCollectCommand(e);default:DS(e)}}processRegisterClientCommand(e){var t=this;return Aw((function*(){const n=e.clientRef;if(t.clientHandlers.has(n))t.logger.error(new zC,{clientRef:n,command:e,existingState:t.clientHandlers.get(n)});else try{const r=null!=e.consent?e.consent:yield t.consentManager.loadConsent(),o=mb(r)?new jC:t.sharedIdentityPool,i=t.logger.withContext({clientRef:n,registration:e,appId:"application"===e.integration.type?e.integration.appId:void 0,distributorId:"distributor"===e.integration.type?e.integration.distributorId:void 0}),s=t.callHandlerFactory.fromConsent(r,i),a=t.storageHandlerFactory.fromConsent(r,i),c=_C({settings:e.pageDependentSettings,monoid:jS,pageDetails:t.sharedData.pageDetails,logger:i}),l=US.combine(e.emailExtractionSettings,c.emailExtractionSettings),u=TS.combine(e.eventTriggeredCollectionSettings,c.eventTriggeredCollectionSettings),d=new PC({logger:i,callHandler:s,storageHandler:a,consent:r,hubConfig:t.hubConfig,sharedData:t.sharedData,contextElementCollectionSettings:e.contextElementCollectionSettings,partnerCookiesToResolve:e.partnerCookies,idCookieSettings:e.idCookieSettings,clientDetails:e.clientDetails,integration:e.integration,urlCollectionSettings:e.urlCollectionSettings,collectSettings:e.collectSettings,autoCollectSettings:e.autoCollectSettings,resolveSettings:e.resolveSettings,pixelSyncSettings:e.pixelSyncSettings,emailExtractionSettings:l,eventTriggeredCollectionSettings:u,identityPool:o});t.clientHandlers.set(n,d),t.logger.info("Client registered",{clientRef:n}),yield d.runStartupTasks(t.scheduler,n)}catch(n){t.logger.error(new JC(n),{command:e})}}))()}processCollectCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?em.resolve():this.doCollect(t,e.sourceEvent)}processCollectToSideChannelCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?em.resolve():t.tryCollectToSideChannel()}processResolveCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?em.resolve():t.resolve({requestedAttributes:e.requestedAttributes,additionalResolveParameters:e.additionalResolveParameters,onSuccess:e.onSuccess,onFailure:e.onFailure})}processAttemptAutoCollectCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?em.resolve():(n=this.logger,window.liQ_instances=null!==(r=window.liQ_instances)&&void 0!==r?r:[],AC(n,window.liQ_instances)||this.commandQueue.collectQueued()?(this.logger.info("Auto collect was attempted but was skipped",{clientRef:e.clientRef}),em.resolve()):this.doCollect(t,{}));var n,r}processLogCommand(e){switch(e.level){case"debug":this.logger.debug(e.message,e.context);break;case"info":this.logger.info(e.message,e.context);break;case"warn":this.logger.warn(e.message,e.context);break;case"error":{const t=new db(e.name,e.message,{cause:e.cause});this.logger.error(t,e.context)}break;default:DS(e)}return em.resolve()}processDebugCommand(e){return null!=e.onEvents&&e.onEvents(this.logger.getEvents()),null!=e.onHub&&e.onHub(this),em.resolve()}loadClientHandler(e){const t=this.clientHandlers.get(e);return null==t&&this.logger.error(new XC,{ref:e}),t}doCollect(e,t){return function(e){if(null==window.liQ_instances)window.liQ_instances=[new LC];else if(!AC(e,window.liQ_instances)){var t;mr(t=window.liQ_instances).call(t,new LC)}}(this.logger),e.collect(t)}}class zC extends db{constructor(){super("DuplicateClientRegisterError","Received duplicate registration for the same ref")}}class JC extends db{constructor(e){super("RegisterClientError","Failed registering a new client",{cause:e})}}class XC extends db{constructor(){super("UnknownClientError","Client passed an unknown client ref")}}class WC extends db{constructor(e,t){super("SubscribeToPageEventsError",e,{cause:t})}}class YC{constructor(e,t){jw(this,"commandQueue",void 0),jw(this,"logger",void 0),this.commandQueue=e,this.logger=t}scheduleAfterDelay(e,t){this.logger.info(`Scheduling ${t.type} for ${e}ms from now`),setTimeout((()=>{this.logger.info(`Executing scheduled ${t.type}`),this.commandQueue.pushInternal(t)}),e)}scheduleOnPageEvents(e,t){const n=e.map((e=>({cssSelector:e.eventSourceCssSelector,eventType:e.eventType,action:()=>{this.logger.info(`Scheduling ${t.type} for page event`,{event:e,command:t}),this.commandQueue.pushInternal(t)}})));this.logger.info(`Subscribing to ${n.length} page events`,{events:e}),function(e){const{listeners:t,logger:n}=e;if(0===t.length)return;const r=()=>{t.forEach((e=>{try{document.querySelectorAll(e.cssSelector).forEach((t=>{t.addEventListener(e.eventType,(()=>{try{e.action()}catch(e){n.error(new WC("Failed to execute action for listener",e))}}))}))}catch(e){n.error(new WC("Failed to subscribe listener",e))}}))};try{"loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)}catch(e){n.error(new WC("Failed to subscribe to DOMContentLoaded event",e))}}({listeners:n,logger:this.logger})}}class ZC{constructor(e,t,n,r,o){jw(this,"logger",void 0),jw(this,"running",!1),jw(this,"hubPromise",void 0),jw(this,"bufferedCommands",[]),this.logger=r;const i=new YC(this,this.logger.withContext({component:"scheduler"}));this.hubPromise=GC.makeAsync(e,t,n,r,o,this,i)}push(...e){for(const t of e){const e=sb(nE,t);e.success?this.pushInternal(e.output):this.logger.error(new KC(t,e.issues))}return this.bufferedCommands.length}pushInternal(...e){var t;const n=mr(t=this.bufferedCommands).call(t,...e);return this.running||(this.running=!0,this.drain()),n}collectQueued(){return this.bufferedCommands.some((e=>"collect"===e.type))}drain(){var e=this;return Aw((function*(){const t=yield e.hubPromise;for(;e.bufferedCommands.length>0;){const n=e.bufferedCommands.shift();try{yield t.processCommand(n)}catch(t){e.logger.error(new ex(t),{command:n})}}e.running=!1}))()}}class KC extends db{constructor(e,t){super("MalformedCommandError","hub received malformed command"),jw(this,"command",void 0),jw(this,"issues",void 0),this.command=e,this.issues=t,this.command=e,this.issues=t}}class ex extends db{constructor(e){super("CommandExecutionError","Failed to execute command",{cause:e})}}!function(){if(null!=window.liQHub&&!Array.isArray(window.liQHub))return void console.log("Not starting liQHub: window.liQHub is not undefined or an array");const e=function(){const e=new gb({callHandler:new Sb(cS.make()),pixelBaseUrl:dS.PIXEL_BASE_URL,sampleRate:dS.ERROR_REPORTING_SAMPLE_RATE,version:dS.LC_VERSION}),t=cS.make(dS.LOGGER_HISTORY_SIZE,[e]),n=new wb,r=new tS,o=new Wb(t),i={hubVersion:dS.LC_VERSION,syncContainerEndpointUrl:dS.SYNC_BASE_URL,idexEndpointUrl:dS.IDEX_BASE_URL,pixelBaseUrl:dS.PIXEL_BASE_URL,sideChannelCollectorUrl:dS.SIDE_CHANNEL_COLLECTOR_URL,sideChannelRegisterCollectDelay:dS.SIDE_CHANNEL_REGISTER_COLLECT_DELAY};return new ZC(r,n,o,t,i)}();Array.isArray(window.liQHub)&&window.liQHub.forEach((t=>mr(e).call(e,t))),window.liQHub={push:(...t)=>mr(e).call(e,...t)}}();const tx=Yw({appId:Zw(eb()),wrapperName:Zw(eb()),usPrivacyString:Zw(eb()),gdprApplies:Zw(Vw(),!1),gdprConsent:Zw(eb()),identifiersToResolve:Zw(nb([eb(),Qw(eb())])),identityResolutionConfig:Zw(Yw({ajaxTimeout:Zw(Ww()),source:Zw(eb()),publisherId:Zw(nb([eb(),Ww()])),requestedAttributes:Zw(Qw(eb())),idCookieMode:Zw(nb([Jw("generated"),Jw("provided")]))})),urlCollectionMode:Zw(nb([Jw("full"),Jw("no_path")]),"full"),queryParametersFilter:Zw(eb()),ajaxTimeout:Zw(Ww()),ajaxRetries:Zw(Ww()),contextSelectors:Zw(eb()),contextElementsLength:Zw(Ww()),gppString:Zw(eb()),gppApplicableSections:Zw(Qw(Ww())),idCookie:Zw(Yw({strategy:Zw(nb([Jw("cookie"),Jw("localStorage")])),name:Zw(eb())})),scrapingCookieNames:Zw(nb([eb(),Qw(eb())])),defaultEventDelay:Zw(Ww()),sync:Zw(Vw()),euns:Zw(Vw()),pt:Zw(Ww()),emailExtraction:Zw(JS,{}),eventTriggeredCollection:Zw(XS,{}),pageDependentSettings:Zw(WS,{})});class nx{constructor(e,t){jw(this,"pushToHub",void 0),jw(this,"version",void 0),jw(this,"clientRef",void 0),jw(this,"bufferedPushes",[]),jw(this,"ready",!1),jw(this,"config",void 0),this.pushToHub=e,this.version=t}push(...e){e.forEach((e=>this.pushOne(e)))}resolve(e,t,n){"function"==typeof t?this.resolveHelper(e,t,n):this.resolveHelper(e,void 0,t)}resolveHelper(e,t,n){if(null==this.clientRef)this.pushToHub({type:"log",level:"error",name:"StandardClientEventBeforeConfig",message:"Cannot resolve before configuration is received"});else{var r;const o=this.config.identityResolutionConfig;this.pushToHub({type:"resolve",clientRef:this.clientRef,onSuccess:[{type:"callback",callback:e}],onFailure:t,requestedAttributes:null!==(r=null==o?void 0:o.requestedAttributes)&&void 0!==r?r:[],additionalResolveParameters:n})}}pushOne(e){if(null!=e&&"object"==typeof e){if("config"in e){const t=sb(tx,e.config);if(!t.success)return void this.pushToHub({type:"log",level:"error",name:"StandardClientInvalidConfig",message:"Invalid configuration received",context:{issues:t.issues}});this.handleConfigEvent(t.output)}else if(null==this.clientRef){var t;mr(t=this.bufferedPushes).call(t,e)}else{const t=sb(hS,e);if(!t.success)return void this.pushToHub({type:"log",level:"error",name:"StandardClientInvalidEvent",message:"Invalid event received",context:{event:e}});this.pushToHub({type:"collect",clientRef:this.clientRef,sourceEvent:t.output})}}}handleConfigEvent(e){if(null==this.clientRef){var t,n;this.config=e,this.clientRef={},this.pushToHub({type:"register_client",clientRef:this.clientRef,integration:ax(e),partnerCookies:sx(e),clientDetails:{name:null!==(t=e.wrapperName)&&void 0!==t?t:"lc-bundle",version:this.version},consent:ix(e),contextElementCollectionSettings:cx(e),idCookieSettings:rx(e),urlCollectionSettings:ox(e),collectSettings:{timeout:e.ajaxTimeout,retries:e.ajaxRetries},autoCollectSettings:{delay:e.defaultEventDelay},resolveSettings:{identityPartner:null===(n=e.identityResolutionConfig)||void 0===n?void 0:n.source},pixelSyncSettings:{enabled:e.sync,euns:e.euns,pixelTimeout:e.pt},emailExtractionSettings:e.emailExtraction,eventTriggeredCollectionSettings:e.eventTriggeredCollection,pageDependentSettings:e.pageDependentSettings}),this.bufferedPushes.forEach((e=>this.pushOne(e))),this.bufferedPushes=[],this.ready=!0}else{const t=function(e,t){if(e.appId!==t.appId||e.wrapperName!==t.wrapperName)return{appId:[e.appId,t.appId],wrapperName:[e.wrapperName,t.wrapperName]}}(this.config,e);null!=t&&this.pushToHub({type:"log",level:"error",name:"StandardClientConfigMismatch",message:`Additional mismatched configuration received: ${JSON.stringify(t)}`})}}}function rx(e){return null==e.idCookie?{type:"generated"}:"localStorage"===e.idCookie.strategy&&null!=e.idCookie.name?{type:"provided",source:"local_storage",key:e.idCookie.name}:"cookie"===e.idCookie.strategy&&null!=e.idCookie.name?{type:"provided",source:"cookie",key:e.idCookie.name}:{type:"generated"}}function ox(e){return{mode:e.urlCollectionMode,queryParametersFilter:e.queryParametersFilter}}function ix(e){var t;if(!(null!=e.gdprConsent||null!=e.usPrivacyString||null!=e.gppString))return;return{gdpr:null!=e.gdprConsent?{gdprApplies:e.gdprApplies,consentString:e.gdprConsent}:void 0,usPrivacy:null!=e.usPrivacyString?{consentString:e.usPrivacyString}:void 0,gpp:null!=e.gppString?{consentString:e.gppString,applicableSections:null!==(t=e.gppApplicableSections)&&void 0!==t?t:[]}:void 0}}function sx(e){var t,n;const r=null!==(t=null!==(n=e.identifiersToResolve)&&void 0!==n?n:e.scrapingCookieNames)&&void 0!==t?t:[];return"string"==typeof r?new Set(r.split(",").map((e=>Im(e).call(e)))):new Set(r)}function ax(e){var t;return{type:"application",publisherId:null===(t=e.identityResolutionConfig)||void 0===t||null===(t=t.publisherId)||void 0===t?void 0:t.toString(),appId:e.appId}}function cx(e){var t;return null!=e.contextSelectors?{enabled:!0,contextSelectors:e.contextSelectors,maxLength:null!==(t=e.contextElementsLength)&&void 0!==t?t:0}:{enabled:!1}}var lx;window.liQHub=null!==(lx=window.liQHub)&&void 0!==lx?lx:[],(null==window.liQ||Array.isArray(window.liQ))&&function(){const e=new nx((e=>{var t;return mr(t=window.liQHub).call(t,e)}),dS.LC_VERSION);null!=window.LI&&mr(e).call(e,{config:window.LI}),Array.isArray(window.liQ)&&window.liQ.forEach((t=>mr(e).call(e,t))),window.liQ=e}()}();
